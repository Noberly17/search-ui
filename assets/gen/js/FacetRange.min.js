webpackJsonpCoveo__temporary([2,3],{21:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e}();i.search=o(465),i.more=o(463),i.loading=o(461),i.checkboxHookExclusionMore=o(450),i.arrowUp=o(448),i.arrowDown=o(447),i.mainClear=o(462),i.orAnd=o(464),i.sort=o(466),i.ascending=o(449),i.descending=o(451),i.dropdownMore=o(456),i.dropdownLess=o(455),i.facetCollapse=o(459),i.facetExpand=o(460),i.dropdownShareQuery=o(458),i.dropdownPreferences=o(457),i.dropdownAuthenticate=o(452),i.dropdownExport=o(453),i.dropdownFollowQuery=o(454),t.SVGIcons=i},241:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(5),n=o(42),s=o(44),a=o(3),r=o(1),c=function(){function e(e){this.facet=e,this.valueToSearch="",this.alwaysInclude=[],this.alwaysExclude=[],this.sortCriteria="occurrences",this.fetchMore=!1,this.nbResults=e.options.numberOfValuesInFacetSearch,this.ignoreAccents=e.options.facetSearchIgnoreAccents}return e.prototype.setValueToSearch=function(e){return this.valueToSearch=e,i.Utils.isNonEmptyString(e)&&(this.valueToSearch=this.valueToSearch.trim(),this.alwaysInclude=this.alwaysInclude.concat(n.FacetUtils.getValuesToUseForSearchInFacet(this.valueToSearch,this.facet))),this},e.prototype.excludeCurrentlyDisplayedValuesInSearch=function(e){var t=this;r.each(this.getCurrentlyShowedValueInSearch(e),function(e){var o=n.FacetUtils.getValuesToUseForSearchInFacet(e,t.facet);r.each(o,function(e){t.alwaysExclude.push(e)})}),r.each(this.facet.getDisplayedFacetValues(),function(e){t.alwaysExclude.push(e.value)})},e.prototype.getGroupByRequest=function(){this.lowerCaseAll();var e=this.nbResults;e+=this.alwaysExclude.length;var t=[];this.valueToSearch&&(t=["*"+this.valueToSearch+"*"]);var o=!0;null!=this.facet.options.lookupField&&(o=!1);var i={allowedValues:t.concat(this.alwaysInclude).concat(this.alwaysExclude),maximumNumberOfValues:e,completeFacetWithStandardValues:o,field:this.facet.options.field,sortCriteria:this.facet.options.sortCriteria||this.sortCriteria,injectionDepth:this.facet.options.injectionDepth};return this.facet.options.lookupField&&(i.lookupField=this.facet.options.lookupField),this.facet.options.computedField&&(i.computedFields=[{field:this.facet.options.computedField,operation:this.facet.options.computedFieldOperation}]),i},e.prototype.getQuery=function(){var e=r.clone(this.facet.queryController.getLastQuery());return e||(e=(new s.QueryBuilder).build()),e.enableQuerySyntax?e.q=this.facet.facetQueryController.basicExpressionToUseForFacetSearch:"@uri"==this.facet.facetQueryController.basicExpressionToUseForFacetSearch?e.q="":e.q="<@- "+this.facet.facetQueryController.basicExpressionToUseForFacetSearch+" -@>",e.enableQuerySyntax=!0,e.cq=this.facet.facetQueryController.constantExpressionToUseForFacetSearch,e.aq=this.facet.facetQueryController.advancedExpressionToUseForFacetSearch,e.enableDidYouMean=!1,e.firstResult=0,e.numberOfResults=0,e.fieldsToInclude=[],e.groupBy=[this.getGroupByRequest()],e},e.prototype.getCurrentlyShowedValueInSearch=function(e){return r.map(a.$$(e).findAll(".coveo-facet-value-caption"),function(e){return a.$$(e).getAttribute("data-original-value")||a.$$(e).text()})},e.prototype.lowerCaseAll=function(){this.alwaysExclude=r.chain(this.alwaysExclude).map(function(e){return e.toLowerCase()}).uniq().value(),this.alwaysInclude=r.chain(this.alwaysInclude).map(function(e){return e.toLowerCase()}).uniq().value()},e}();t.FacetSearchParameters=c},263:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=function(){function e(){}return e.addPrefixedEvent=function(e,t,o){i.each(this.prefixes,function(i){""==i&&(t=t.toLowerCase()),e.addEventListener(i+t,o,!1)})},e.removePrefixedEvent=function(e,t,o){i.each(this.prefixes,function(i){""==i&&(t=t.toLowerCase()),e.removeEventListener(i+t,o,!1)})},e}();n.prefixes=["webkit","moz","MS","o",""],t.EventsUtils=n},264:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(18),n=o(1),s=function(){function e(e,t){this.facet=e,this.facetSort=t}return e.prototype.reorderValues=function(e){if(this.facetSort&&this.facetSort.activeSort){if("custom"==this.facetSort.activeSort.name&&void 0!=this.facet.options.customSort)return this.reorderValuesWithCustomOrder(e);if(-1!=this.facetSort.activeSort.name.indexOf("alpha"))return this.reorderValuesWithCustomCaption(e)}return e},e.prototype.reorderValuesWithCustomOrder=function(e){var t=n.map(this.facet.options.customSort,function(e){return e.toLowerCase()}),o=n.map(e,function(e,o){var s=n.findIndex(t,function(t){return i.StringUtils.equalsCaseInsensitive(t,e.value)||null!=e.lookupValue&&i.StringUtils.equalsCaseInsensitive(t,e.lookupValue)});return-1==s&&(s=o+t.length),{facetValue:e,index:s}}),s=n.sortBy(o,"index");return s="ascending"==this.facetSort.customSortDirection?s:s.reverse(),n.pluck(s,"facetValue")},e.prototype.reorderValuesWithCustomCaption=function(e){var t=this,o=n.sortBy(e,function(e){return t.facet.getValueCaption(e).toLowerCase()});return-1!=this.facetSort.activeSort.name.indexOf("descending")&&(o=o.reverse()),o},e}();t.FacetValuesOrder=s},265:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=o(68),n=o(5),s=o(241),a=o(7),r=o(42),c=o(1),l=function(){function t(e){this.facet=e}return t.prototype.prepareForNewQuery=function(){this.lastGroupByRequestIndex=void 0,this.expressionToUseForFacetSearch=void 0,this.constantExpressionToUseForFacetSearch=void 0},t.prototype.computeOurFilterExpression=function(){var e=this,t=new i.ExpressionBuilder,o=this.facet.values.getSelected();o.length>0&&(this.facet.options.useAnd?c.each(o,function(o){t.addFieldExpression(e.facet.options.field,"==",[o.value])}):t.addFieldExpression(this.facet.options.field,"==",c.map(o,function(e){return e.value})));var s=this.facet.values.getExcluded();return s.length>0&&t.addFieldNotEqualExpression(this.facet.options.field,c.map(s,function(e){return e.value})),n.Utils.isNonEmptyString(this.facet.options.additionalFilter)&&t.add(this.facet.options.additionalFilter),t.build()},t.prototype.putGroupByIntoQueryBuilder=function(e){a.Assert.exists(e);var t=this.createGroupByAllowedValues(),o=this.createBasicGroupByRequest(t),i=this.createGroupByQueryOverride(e);if(n.Utils.isNullOrUndefined(i)){var s=e.computeCompleteExpressionParts();this.expressionToUseForFacetSearch=null==s.withoutConstant?"@uri":s.withoutConstant,this.basicExpressionToUseForFacetSearch=null==s.basic?"@uri":s.basic,this.advancedExpressionToUseForFacetSearch=s.advanced,this.constantExpressionToUseForFacetSearch=s.constant}else o.queryOverride=i.basic,o.advancedQueryOverride=i.advanced,o.constantQueryOverride=i.constant,this.expressionToUseForFacetSearch=i.withoutConstant,this.basicExpressionToUseForFacetSearch=i.basic,this.advancedExpressionToUseForFacetSearch=i.advanced,this.constantExpressionToUseForFacetSearch=i.constant;this.lastGroupByRequestIndex=e.groupByRequests.length,this.lastGroupByRequest=o,e.groupByRequests.push(o)},t.prototype.search=function(t,o){var i=this;return void 0===o&&(o=t.nbResults),new e(function(e,n){var s=function(n){var s=n.length;if(n=i.checkForFacetSearchValuesToRemove(n,t.valueToSearch),r.FacetUtils.needAnotherFacetSearch(n.length,s,o,5))return t.nbResults+=5,i.search(t,n.length);e(n)},a=i.facet.getEndpoint().search(t.getQuery());i.currentSearchPromise=a,a.then(function(e){if(i.currentSearchPromise==a){var o=[];e.groupByResults&&e.groupByResults[0]&&c.each(e.groupByResults[0].values,function(e){e.lookupValue?c.contains(t.alwaysExclude,e.lookupValue.toLowerCase())||o.push(e):c.contains(t.alwaysExclude,e.value.toLowerCase())||o.push(e)}),s(c.first(o,t.nbResults))}else n()}).catch(function(e){n(e)})})},t.prototype.fetchMore=function(e){var t=this,o=new s.FacetSearchParameters(this.facet);return o.alwaysInclude=this.facet.options.allowedValues||c.pluck(this.facet.values.getAll(),"value"),o.nbResults=e,this.facet.getEndpoint().search(o.getQuery()).then(function(e){if(t.facet.options.allowedValues&&e&&e.groupByResults&&e.groupByResults[0]){var o=e.groupByResults[0].values;o=c.filter(o,function(e){return c.contains(c.map(t.facet.options.allowedValues,function(e){return e.toLowerCase()}),e.value.toLowerCase())}),e.groupByResults[0].values=o}return e})},t.prototype.searchInFacetToUpdateDelta=function(e){var t=new s.FacetSearchParameters(this.facet),o=t.getQuery();return o.aq=this.computeOurFilterExpression(),c.each(e,function(e){e.waitingForDelta=!0}),o.groupBy=[this.createBasicGroupByRequest(c.map(e,function(e){return e.value}))],o.groupBy[0].completeFacetWithStandardValues=!1,this.facet.getEndpoint().search(o)},t.prototype.createGroupByAllowedValues=function(){return void 0!=this.facet.options.allowedValues?this.facet.options.allowedValues:void 0!=this.facet.options.customSort?this.getUnionWithCustomSortLowercase(this.facet.options.customSort,this.getAllowedValuesFromSelected()):c.map(this.getAllowedValuesFromSelected(),function(e){return e.value})},t.prototype.getUnionWithCustomSortLowercase=function(e,t){var o=c.map(e,function(e){return e.toLowerCase()}),i=c.chain(t).filter(function(e){return!c.contains(o,e.value.toLowerCase())}).map(function(e){return e.value}).value();return c.compact(e.concat(i))},t.prototype.getAllowedValuesFromSelected=function(){var e=[];if(this.facet.options.useAnd||!this.facet.keepDisplayedValuesNextTime){if(0==this.facet.values.getSelected().length)return;e=this.facet.values.getSelected()}else e=this.facet.values.getAll();return e},t.prototype.createGroupByQueryOverride=function(e){var t=this.facet.options.additionalFilter?this.facet.options.additionalFilter:"",o=void 0;return this.facet.options.useAnd?n.Utils.isNonEmptyString(t)&&(o=e.computeCompleteExpressionParts(),n.Utils.isEmptyString(o.basic)&&(o.basic="@uri")):this.facet.values.hasSelectedOrExcludedValues()?(o=e.computeCompleteExpressionPartsExcept(this.computeOurFilterExpression()),n.Utils.isEmptyString(o.basic)&&(o.basic="@uri")):n.Utils.isNonEmptyString(t)&&(o=e.computeCompleteExpressionParts(),n.Utils.isEmptyString(o.basic)&&(o.basic="@uri")),o&&n.Utils.isNonEmptyString(t)&&(o.constant=o.constant?o.constant+" "+t:t),c.each(c.keys(o),function(e){(n.Utils.isEmptyString(o[e])||n.Utils.isNullOrUndefined(o[e]))&&delete o[e]}),0==c.keys(o).length&&(o=void 0),o},t.prototype.createBasicGroupByRequest=function(e,t){void 0===t&&(t=!0);var o=this.facet.numberOfValues;if(null!=this.facet.options.customSort){var i=this.getUnionWithCustomSortLowercase(this.facet.options.customSort,this.facet.values.getSelected().concat(this.facet.values.getExcluded()));o=Math.max(o,i.length)}var s={field:this.facet.options.field,maximumNumberOfValues:o+(this.facet.options.enableMoreLess?1:0),sortCriteria:this.facet.options.sortCriteria,injectionDepth:this.facet.options.injectionDepth,completeFacetWithStandardValues:void 0==this.facet.options.allowedValues};return this.facet.options.lookupField&&(s.lookupField=this.facet.options.lookupField),null!=e&&(s.allowedValues=e),t&&n.Utils.isNonEmptyString(this.facet.options.computedField)&&(s.computedFields=[{field:this.facet.options.computedField,operation:this.facet.options.computedFieldOperation}]),s},t.prototype.checkForFacetSearchValuesToRemove=function(e,t){var o=this,i=r.FacetUtils.getRegexToUseForFacetSearch(t,this.facet.options.facetSearchIgnoreAccents);return c.filter(e,function(e){var t=c.isEmpty(o.facet.options.allowedValues)||c.contains(o.facet.options.allowedValues,e.value),n=o.facet.getValueCaption(e);return t&&i.test(n)})},t}();t.FacetQueryController=l}).call(t,o(6))},27:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.addClassToSVGInContainer=function(t,o){var i=t.querySelector("svg");i.setAttribute("class",""+e.getClass(i)+o)},e.removeClassFromSVGInContainer=function(t,o){var i=t.querySelector("svg");i.setAttribute("class",e.getClass(i).replace(o,""))},e.getClass=function(e){var t=e.getAttribute("class");return t?t+" ":""},e}();t.SVGDom=i},299:function(e,t,o){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=o(57),s=o(9),a=o(5),r=o(69),c=o(29),l=o(607),u=o(2),h=o(24),d=o(4),p=function(e){function t(o,i,n){var a=e.call(this,o,s.ComponentOptions.initComponentOptions(o,t,i),n,t.ID)||this;return a.element=o,a.options.enableFacetSearch=!1,a.options.enableSettings=!1,a.options.includeInOmnibox=!1,a.options.enableMoreLess=!1,null==a.options.valueCaption&&1==a.options.dateField&&(a.options.valueCaption="date"),a}return i(t,e),t.prototype.getValueCaption=function(t){var o=e.prototype.getValueCaption.call(this,t);if(a.Utils.exists(this.options.valueCaption)&&"string"==typeof this.options.valueCaption){var i=/^(.*)\.\.(.*)$/.exec(t.value);if(null!=i){var n=r.TemplateHelpers.getHelper(this.options.valueCaption);if(null!=n)o=n.call(this,i[1])+" - "+n.call(this,i[2]);else{var s=i[1].match(/^[\+\-]?[0-9]+(\.[0-9]+)?$/)?Number(i[1]):c.DateUtils.convertFromJsonDateIfNeeded(i[1]),l=i[2].match(/^[\+\-]?[0-9]+(\.[0-9]+)?$/)?Number(i[2]):c.DateUtils.convertFromJsonDateIfNeeded(i[2]);o=h.format(s,this.options.valueCaption)+" - "+h.format(l,this.options.valueCaption)}}}return o},t.prototype.initFacetQueryController=function(){this.facetQueryController=new l.FacetRangeQueryController(this)},t.prototype.processNewGroupByResults=function(t){var o=this;null!=t&&(null!=this.options.ranges||this.keepDisplayedValuesNextTime&&!this.values.hasSelectedOrExcludedValues()||(this.keepDisplayedValuesNextTime=!1,t.values.sort(function(e,t){var i=e.value.split(".."),n=t.value.split("..");return o.options.dateField?Date.parse(i[0])-Date.parse(n[0]):Number(i[0])-Number(n[0])}))),e.prototype.processNewGroupByResults.call(this,t)},t}(n.Facet);p.ID="FacetRange",p.parent=n.Facet,p.doExport=function(){d.exportGlobally({FacetRange:p})},p.options={dateField:s.ComponentOptions.buildBooleanOption({defaultValue:!1}),ranges:s.ComponentOptions.buildJsonObjectOption()},t.FacetRange=p,u.Initialization.registerAutoCreateComponent(p)},390:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=o(263),s=o(1),a=function(){function e(e,t,o){this.dropdownContent=e,this.dropdownHeader=t,this.coveoRoot=o,this.isOpened=!1,this.onOpenHandlers=[],this.onCloseHandlers=[],this.popupBackgroundIsEnabled=!0,this.popupBackground=this.buildPopupBackground(),this.bindOnClickDropdownHeaderEvent(),this.saveContentPosition()}return e.prototype.registerOnOpenHandler=function(e,t){this.onOpenHandlers.push({handler:e,context:t})},e.prototype.registerOnCloseHandler=function(e,t){this.onCloseHandlers.push({handler:e,context:t})},e.prototype.cleanUp=function(){this.close(),this.dropdownHeader.cleanUp(),this.dropdownContent.cleanUp(),this.restoreContentPosition()},e.prototype.open=function(){this.isOpened=!0,this.dropdownHeader.open(),this.dropdownContent.positionDropdown(),s.each(this.onOpenHandlers,function(e){e.handler.apply(e.context)}),this.showPopupBackground()},e.prototype.close=function(){this.isOpened=!1,s.each(this.onCloseHandlers,function(e){e.handler.apply(e.context)}),this.dropdownHeader.close(),this.dropdownContent.hideDropdown(),this.hidePopupBackground()},e.prototype.disablePopupBackground=function(){this.popupBackgroundIsEnabled=!1},e.prototype.bindOnClickDropdownHeaderEvent=function(){var e=this;this.dropdownHeader.element.on("click",function(){e.isOpened?e.close():e.open()})},e.prototype.showPopupBackground=function(){this.popupBackgroundIsEnabled&&(this.coveoRoot.el.appendChild(this.popupBackground.el),window.getComputedStyle(this.popupBackground.el).opacity,this.popupBackground.el.style.opacity=e.TRANSPARENT_BACKGROUND_OPACITY)},e.prototype.hidePopupBackground=function(){this.popupBackgroundIsEnabled&&(window.getComputedStyle(this.popupBackground.el).opacity,this.popupBackground.el.style.opacity="0")},e.prototype.buildPopupBackground=function(){var t=this,o=i.$$("div",{className:e.DROPDOWN_BACKGROUND_CSS_CLASS_NAME});return n.EventsUtils.addPrefixedEvent(o.el,"TransitionEnd",function(){"0"==o.el.style.opacity&&o.detach()}),o.on("click",function(){return t.close()}),o},e.prototype.saveContentPosition=function(){var e=this.dropdownContent.element.el.previousSibling,t=this.dropdownContent.element.el.parentElement;this.previousSibling=e?i.$$(e):null,this.parent=i.$$(t)},e.prototype.restoreContentPosition=function(){this.previousSibling?this.dropdownContent.element.insertAfter(this.previousSibling.el):this.parent.prepend(this.dropdownContent.element.el)},e}();a.TRANSPARENT_BACKGROUND_OPACITY="0.9",a.DROPDOWN_BACKGROUND_CSS_CLASS_NAME="coveo-dropdown-background",t.ResponsiveDropdown=a},391:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=o(50),s=o(78),a=function(){function e(e,t,o,i,n){this.element=t,this.cssClassName="coveo-"+e+"-dropdown-content",this.coveoRoot=o,this.widthRatio=n,this.minWidth=i}return e.prototype.positionDropdown=function(){this.element.addClass(this.cssClassName),this.element.addClass(e.DEFAULT_CSS_CLASS_NAME),this.element.el.style.display="";var t=this.widthRatio*this.coveoRoot.width();t<=this.minWidth&&(t=this.minWidth),this.element.el.style.width=t.toString()+"px",n.PopupUtils.positionPopup(this.element.el,i.$$(this.coveoRoot.find("."+s.ResponsiveComponentsManager.DROPDOWN_HEADER_WRAPPER_CSS_CLASS)).el,this.coveoRoot.el,{horizontal:n.HorizontalAlignment.INNERRIGHT,vertical:n.VerticalAlignment.BOTTOM,verticalOffset:15},this.coveoRoot.el)},e.prototype.hideDropdown=function(){this.element.el.style.display="none",this.element.removeClass(this.cssClassName),this.element.removeClass(e.DEFAULT_CSS_CLASS_NAME)},e.prototype.cleanUp=function(){this.element.el.removeAttribute("style")},e}();a.DEFAULT_CSS_CLASS_NAME="coveo-dropdown-content",t.ResponsiveDropdownContent=a},392:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=function(){function e(t,o){this.element=o,this.element.addClass("coveo-"+t+"-dropdown-header"),this.element.addClass(e.DEFAULT_CSS_CLASS_NAME)}return e.prototype.open=function(){this.element.addClass(e.ACTIVE_HEADER_CSS_CLASS_NAME)},e.prototype.close=function(){this.element.removeClass(e.ACTIVE_HEADER_CSS_CLASS_NAME)},e.prototype.cleanUp=function(){this.element.detach()},e.prototype.hide=function(){i.$$(this.element).addClass("coveo-hidden")},e.prototype.show=function(){i.$$(this.element).removeClass("coveo-hidden")},e}();n.DEFAULT_CSS_CLASS_NAME="coveo-dropdown-header",n.ACTIVE_HEADER_CSS_CLASS_NAME="coveo-dropdown-header-active",t.ResponsiveDropdownHeader=n},393:function(e,t,o){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=o(394),s=o(3),a=o(36),r=o(5),c=o(10),l=o(14),u=o(12),h=o(19),d=o(50),p=o(1);o(474);var f=o(21),v=o(27),m=function(e){function t(t,o){var i=e.call(this,t,o)||this;return i.sorts=t,i.facet=o,i.customSortDirectionChange=!1,i.enabledSortsIgnoreRenderBecauseOfPairs=[],i.filterDuplicateForRendering(),i}return i(t,e),t.prototype.build=function(){var e=this;this.settingsButton=s.$$("div",{className:"coveo-facet-header-settings",title:c.l("Settings")}).el,this.settingsIcon=s.$$("span",{className:"coveo-facet-settings-more"}).el,this.settingsIcon.innerHTML=f.SVGIcons.more,v.SVGDom.addClassToSVGInContainer(this.settingsIcon,"coveo-facet-settings-more-svg"),this.settingsButton.appendChild(this.settingsIcon),this.settingsPopup=s.$$("div",{className:"coveo-facet-settings-popup"}).el,r.Utils.isNonEmptyArray(this.enabledSorts)&&(this.sortSection=this.buildSortSection(),this.enabledSortsAllowDirection()&&(this.directionSection=this.buildDirectionSection())),this.facet.options.enableSettingsFacetState&&(this.saveStateSection=this.buildSaveStateSection(),this.clearStateSection=this.buildClearStateSection()),this.facet.options.enableCollapse&&(this.hideSection=this.buildHideSection(),this.showSection=this.buildShowSection());var t=function(){e.appendIfNotUndefined(e.saveStateSection),e.appendIfNotUndefined(e.clearStateSection),e.appendIfNotUndefined(e.hideSection),e.appendIfNotUndefined(e.showSection)};return this.handleMouseEventOnButton(this.sortSection),r.Utils.isNonEmptyArray(this.enabledSorts)?(this.settingsPopup.appendChild(this.sortSection.element),p.each(this.directionSection,function(t){e.appendIfNotUndefined(t)}),t()):t(),this.settingsButton},t.prototype.loadSavedState=function(){if(this.facetStateLocalStorage){var e=this.facetStateLocalStorage.load(),t=this.facet.queryStateModel.get(this.includedStateAttribute),o=this.facet.queryStateModel.get(this.excludedStateAttribute),i=this.facet.queryStateModel.get(this.operatorStateAttribute);if(!r.Utils.isNullOrUndefined(e)&&r.Utils.isEmptyArray(t)&&r.Utils.isEmptyArray(o)&&!r.Utils.isNonEmptyString(i)){var n={};n[this.includedStateAttribute]=e.included,n[this.excludedStateAttribute]=e.excluded,n[this.operatorStateAttribute]=e.operator,this.facet.queryStateModel.setMultiple(n),this.loadedFromSettings=n}}else this.facet.logger.info("Facet state local storage not enabled : See Facet.options.enableSettingsFacetState")},t.prototype.saveState=function(){this.facetStateLocalStorage?this.facetStateLocalStorage.save({included:this.facet.queryStateModel.get(this.includedStateAttribute),excluded:this.facet.queryStateModel.get(this.excludedStateAttribute),operator:this.facet.queryStateModel.get(this.operatorStateAttribute)}):this.facet.logger.info("Facet state local storage not enabled : See Facet.options.enableSettingsFacetState")},t.prototype.close=function(){s.$$(this.settingsPopup).detach()},t.prototype.open=function(){var e=this;d.PopupUtils.positionPopup(this.settingsPopup,this.settingsButton,this.facet.root,this.getPopupAlignment(),this.facet.root),this.hideSection&&this.showSection&&(s.$$(this.hideSection).toggle(!s.$$(this.facet.element).hasClass("coveo-facet-collapsed")),s.$$(this.showSection).toggle(s.$$(this.facet.element).hasClass("coveo-facet-collapsed"))),this.facet.options.enableSettingsFacetState&&s.$$(this.clearStateSection).toggle(!r.Utils.isNullOrUndefined(this.facetStateLocalStorage.load())),p.each(this.enabledSorts,function(t,o){r.Utils.isNullOrUndefined(e.sortSection.sortItems[o])||(e.activeSort.name==t.name.toLowerCase()||e.activeSort.relatedSort==t.name.toLowerCase()?e.selectItem(e.sortSection.sortItems[o]):e.unselectItem(e.sortSection.sortItems[o]))})},t.prototype.buildSortSection=function(){var e=this.buildSection("coveo-facet-settings-section-sort"),t=this.buildIcon("coveo-facet-settings-section-sort-svg",f.SVGIcons.sort),o=this.buildItems(),i=document.createElement("div");s.$$(i).addClass("coveo-facet-settings-section-sort-title"),s.$$(i).text(c.l("SortBy")+" :"),o.appendChild(i);var n=this.buildSortSectionItems();return p.each(n,function(e){o.appendChild(e)}),e.appendChild(t),e.appendChild(o),{element:e,sortItems:n}},t.prototype.buildSortSectionItems=function(){var e=this,t=p.map(this.enabledSorts,function(t){if(!p.contains(e.enabledSortsIgnoreRenderBecauseOfPairs,t)){var o=e.buildItem(c.l(t.label),t.description);return s.$$(o).on("click",function(o){return e.handleClickSortButton(o,t)}),o}});return t=p.compact(t)},t.prototype.closePopupAndUpdateSort=function(){this.close(),"custom"!=this.activeSort.name?this.facet.updateSort(this.activeSort.name):(this.facet.updateSort("nosort"),this.customSortDirectionChange&&(this.customSortDirectionChange=!1,this.facet.queryController.executeQuery()))},t.prototype.enabledSortsAllowDirection=function(){return p.some(this.enabledSorts,function(e){return e.directionToggle})},t.prototype.buildDirectionSection=function(){var e=this,t=this.buildAscendingOrDescendingSection("Ascending"),o=this.buildIcon("coveo-facet-settings-section-direction-ascending-svg",f.SVGIcons.ascending),i=this.buildIcon("coveo-facet-settings-section-direction-descending-svg",f.SVGIcons.descending),n=this.buildItems(),a=this.buildAscendingOrDescending("Ascending");n.appendChild(a),t.appendChild(o),t.appendChild(n),s.$$(t).on("click",function(t){return e.handleDirectionClick(t,"ascending")});var r=this.buildAscendingOrDescendingSection("Descending"),c=this.buildItems(),l=this.buildAscendingOrDescending("Descending");return c.appendChild(l),r.appendChild(i),r.appendChild(c),s.$$(r).on("click",function(t){return e.handleDirectionClick(t,"descending")}),this.activeSort.directionToggle?this.selectItem(this.getItems(t)[0]):(s.$$(t).addClass("coveo-facet-settings-disabled"),s.$$(r).addClass("coveo-facet-settings-disabled")),[t,r]},t.prototype.buildSaveStateSection=function(){var e=this,t=this.buildSection("coveo-facet-settings-section-save-state"),o=this.buildIcon("coveo-facet-settings-section-save-state-svg",f.SVGIcons.dropdownMore),i=this.buildItems();this.facetStateLocalStorage=new a.LocalStorageUtils("facet-state-"+this.facet.options.id),this.includedStateAttribute=l.QueryStateModel.getFacetId(this.facet.options.id),this.excludedStateAttribute=l.QueryStateModel.getFacetId(this.facet.options.id,!1),this.operatorStateAttribute=l.QueryStateModel.getFacetOperator(this.facet.options.id);var n=document.createElement("div");return s.$$(n).addClass("coveo-facet-settings-item"),n.setAttribute("title",p.escape(c.l("SaveFacetState"))),s.$$(n).text(p.escape(c.l("SaveFacetState"))),i.appendChild(n),t.appendChild(o),t.appendChild(i),s.$$(t).on("click",function(t){return e.handleSaveStateClick()}),t},t.prototype.buildClearStateSection=function(){var e=this,t=this.buildSection("coveo-facet-settings-section-clear-state"),o=this.buildIcon("coveo-facet-settings-section-clear-state-svg",f.SVGIcons.dropdownLess),i=this.buildItems(),n=this.buildItem(c.l("ClearFacetState"));return i.appendChild(n),t.appendChild(o),t.appendChild(i),s.$$(t).on("click",function(t){return e.handleClearStateClick()}),t},t.prototype.buildHideSection=function(){var e=this,t=this.buildSection("coveo-facet-settings-section-hide"),o=this.buildIcon("coveo-facet-settings-section-hide-svg",f.SVGIcons.facetCollapse),i=this.buildItems(),n=this.buildItem(c.l("Collapse"));return i.appendChild(n),t.appendChild(o),t.appendChild(i),s.$$(t).on("click",function(t){e.facet.facetHeader.collapseFacet(),e.close()}),t},t.prototype.buildShowSection=function(){var e=this,t=this.buildSection("coveo-facet-settings-section-show"),o=this.buildIcon("coveo-facet-settings-section-show-svg",f.SVGIcons.facetExpand),i=this.buildItems(),n=this.buildItem(c.l("Expand"));return i.appendChild(n),t.appendChild(o),t.appendChild(i),s.$$(t).on("click",function(t){e.facet.facetHeader.expandFacet(),e.close()}),t},t.prototype.buildIcon=function(e,t){if(e&&t){var o=s.$$("div",{className:"coveo-icon-container"},t);return v.SVGDom.addClassToSVGInContainer(o.el,e),o.el}return s.$$("div",{className:"coveo-icon"}).el},t.prototype.buildAscendingOrDescending=function(e){var t=this.buildItem(c.l(e));return t.setAttribute("data-direction",e.toLowerCase()),t},t.prototype.buildAscendingOrDescendingSection=function(e){return this.buildSection("coveo-facet-settings-section-direction-"+e.toLowerCase())},t.prototype.buildItem=function(e,t){return void 0===t&&(t=e),s.$$("div",{className:"coveo-facet-settings-item",title:p.escape(t)},p.escape(e)).el},t.prototype.buildItems=function(){var e=document.createElement("div");return s.$$(e).addClass("coveo-facet-settings-items"),e},t.prototype.buildSection=function(e){var t=document.createElement("div");return s.$$(t).addClass(["coveo-facet-settings-section",e]),t},t.prototype.handleClickSettingsButtons=function(e,t){r.Utils.isNullOrUndefined(this.settingsPopup.parentElement)?this.open():this.close()},t.prototype.handleClickSortButton=function(e,o){this.activeSort!=o&&this.activeSort.relatedSort!=o.name&&(this.activeSort=o,o.directionToggle&&p.contains(this.enabledSorts,t.availableSorts[this.activeSort.relatedSort])?this.activateDirectionSection():this.disableDirectionSection(),this.selectItem(e.target),this.closePopupAndUpdateSort())},t.prototype.handleDirectionClick=function(e,o){var i=this;s.$$(e.target.parentElement.parentElement).hasClass("coveo-facet-settings-disabled")||-1!=this.activeSort.name.indexOf(o)||(this.activeSort=t.availableSorts[this.activeSort.relatedSort],p.each(this.directionSection,function(e){i.unselectSection(e)}),this.selectItem(e.target),"custom"==this.activeSort.name&&this.customSortDirection!=o&&(this.customSortDirection=o,this.customSortDirectionChange=!0),this.closePopupAndUpdateSort())},t.prototype.handleSaveStateClick=function(){this.saveState(),this.close()},t.prototype.handleClearStateClick=function(){var e=this;this.facetStateLocalStorage.remove(),this.facet.reset(),this.close(),this.facet.triggerNewQuery(function(){return e.facet.usageAnalytics.logSearchEvent(u.analyticsActionCauseList.facetClearAll,{facetId:e.facet.options.id,facetTitle:e.facet.options.title})})},t.prototype.handleMouseEventOnButton=function(e){var t,o=this;s.$$(this.settingsButton).on("click",function(t){return o.handleClickSettingsButtons(t,e)});var i=function(){t=setTimeout(function(){o.close()},300)},n=function(){clearTimeout(t)};s.$$(this.settingsIcon).on("mouseleave",i),s.$$(this.settingsPopup).on("mouseleave",i),s.$$(this.settingsIcon).on("mouseenter",n),s.$$(this.settingsPopup).on("mouseenter",n)},t.prototype.getCurrentDirectionItem=function(e){var t=this;void 0===e&&(e=this.directionSection);var o;return p.each(e,function(e){o||(o=p.find(t.getItems(e),function(e){return-1!=t.activeSort.name.indexOf(e.getAttribute("data-direction"))}))}),o||(o=e[0]),o},t.prototype.activateDirectionSection=function(){var e=this;p.each(this.directionSection,function(t){s.$$(t).removeClass("coveo-facet-settings-disabled"),e.unselectSection(t)}),this.selectItem(this.getCurrentDirectionItem())},t.prototype.disableDirectionSection=function(){var e=this;p.each(this.directionSection,function(t){s.$$(t).addClass("coveo-facet-settings-disabled"),e.unselectSection(t)})},t.prototype.getItems=function(e){return s.$$(e).findAll(".coveo-facet-settings-item")},t.prototype.unselectSection=function(e){p.each(this.getItems(e),function(e){s.$$(e).removeClass("coveo-selected")})},t.prototype.selectItem=function(e){s.$$(e).addClass("coveo-selected")},t.prototype.unselectItem=function(e){s.$$(e).removeClass("coveo-selected")},t.prototype.getPopupAlignment=function(){return{horizontal:h.DeviceUtils.isMobileDevice()?d.HorizontalAlignment.CENTER:d.HorizontalAlignment.INNERLEFT,vertical:d.VerticalAlignment.BOTTOM}},t.prototype.filterDuplicateForRendering=function(){var e=this;p.each(this.enabledSorts,function(t,o){if(null!=t.relatedSort)for(var i=o+1;i<e.enabledSorts.length;i++)if(e.enabledSorts[i].name==t.relatedSort){e.enabledSortsIgnoreRenderBecauseOfPairs.push(e.enabledSorts[i]);break}})},t.prototype.appendIfNotUndefined=function(e){r.Utils.isNullOrUndefined(e)||this.settingsPopup.appendChild(e)},t}(n.FacetSort);t.FacetSettings=m},394:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(10),n=o(393),s=o(5),a=o(1),r=function(){function e(e,t){var o=this;this.facet=t,this.enabledSorts=[],this.customSortDirection="ascending",a.each(e,function(e){var t=n.FacetSettings.availableSorts[e.toLowerCase()];void 0!=t&&o.enabledSorts.push(t)}),this.removeEnabledSortsBasedOnFacetType(),s.Utils.isNonEmptyArray(this.enabledSorts)&&(void 0!=this.facet.options.sortCriteria&&(this.activeSort=a.find(this.enabledSorts,function(e){return e.name==o.facet.options.sortCriteria})),this.activeSort||(this.activeSort=this.enabledSorts[0]))}return e.prototype.removeEnabledSortsBasedOnFacetType=function(){if(Coveo.FacetRange&&this.facet instanceof Coveo.FacetRange){this.facet.options.slider&&(this.enabledSorts=[])}},e}();r.availableSorts={score:{label:i.l("Score"),directionToggle:!1,description:i.l("ScoreDescription"),name:"score"},occurrences:{label:i.l("Occurrences"),directionToggle:!1,description:i.l("OccurrencesDescription"),name:"occurrences"},alphaascending:{label:i.l("Label"),directionToggle:!0,description:i.l("LabelDescription"),name:"alphaascending",relatedSort:"alphadescending"},alphadescending:{label:i.l("Label"),directionToggle:!0,description:i.l("LabelDescription"),name:"alphadescending",relatedSort:"alphaascending"},computedfieldascending:{label:i.l("Value"),directionToggle:!0,description:i.l("ValueDescription"),name:"computedfieldascending",relatedSort:"computedfielddescending"},computedfielddescending:{label:i.l("Value"),directionToggle:!0,description:i.l("ValueDescription"),name:"computedfielddescending",relatedSort:"computedfieldascending"},chisquare:{label:i.l("RelativeFrequency"),directionToggle:!1,description:i.l("RelativeFrequencyDescription"),name:"chisquare"},nosort:{label:i.l("Nosort"),directionToggle:!1,description:i.l("NosortDescription"),name:"nosort"},custom:{label:i.l("Custom"),directionToggle:!0,description:i.l("CustomDescription"),name:"custom",relatedSort:"custom"}},t.FacetSort=r},395:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(396),n=o(5),s=o(12),a=o(3),r=o(22),c=function(){function e(e,t,o,i){this.facet=e,this.facetValue=t,this.onSelect=o,this.onExclude=i}return e.prototype.build=function(){return this.renderer=new i.ValueElementRenderer(this.facet,this.facetValue).build(),this.bindEvent({displayNextTime:!0,pinFacet:this.facet.options.preservePosition}),this},e.prototype.bindEvent=function(e){n.Utils.isNullOrUndefined(e.omniboxObject)?this.isOmnibox=!1:this.isOmnibox=!0,this.handleEventForCheckboxChange(e),this.facetValue.excluded?this.handleEventForExcludedValueElement(e):this.handleEventForValueElement(e)},e.prototype.select=function(){this.facetValue.selected=!0,this.facetValue.excluded=!1,this.renderer.setCssClassOnListValueElement()},e.prototype.unselect=function(){this.facetValue.selected=!1,this.facetValue.excluded=!1,this.renderer.setCssClassOnListValueElement()},e.prototype.exclude=function(){this.facetValue.selected=!1,this.facetValue.excluded=!0,this.renderer.setCssClassOnListValueElement()},e.prototype.unexclude=function(){this.facetValue.selected=!1,this.facetValue.excluded=!1,this.renderer.setCssClassOnListValueElement()},e.prototype.toggleExcludeWithUA=function(){var e,t=this;e=this.facetValue.excluded?this.isOmnibox?s.analyticsActionCauseList.omniboxFacetUnexclude:s.analyticsActionCauseList.facetUnexclude:this.isOmnibox?s.analyticsActionCauseList.omniboxFacetExclude:s.analyticsActionCauseList.facetExclude,this.facet.toggleExcludeValue(this.facetValue),this.onExclude?this.facet.triggerNewQuery(function(){return t.onExclude(t,e)}):this.facet.triggerNewQuery(function(){return t.facet.usageAnalytics.logSearchEvent(e,t.getAnalyticsFacetMeta())})},e.prototype.handleSelectValue=function(e){var t=this;this.facet.keepDisplayedValuesNextTime=e.displayNextTime&&!this.facet.options.useAnd;var o;this.facetValue.excluded?(o=this.isOmnibox?s.analyticsActionCauseList.omniboxFacetUnexclude:s.analyticsActionCauseList.facetUnexclude,this.facet.unexcludeValue(this.facetValue)):(o=this.facetValue.selected?this.isOmnibox?s.analyticsActionCauseList.omniboxFacetDeselect:s.analyticsActionCauseList.facetDeselect:this.isOmnibox?s.analyticsActionCauseList.omniboxFacetSelect:s.analyticsActionCauseList.facetSelect,this.facet.toggleSelectValue(this.facetValue)),this.onSelect?this.facet.triggerNewQuery(function(){return t.onSelect(t,o)}):this.facet.triggerNewQuery(function(){return t.facet.usageAnalytics.logSearchEvent(o,t.getAnalyticsFacetMeta())})},e.prototype.handleExcludeClick=function(e){this.facet.keepDisplayedValuesNextTime=e.displayNextTime&&!this.facet.options.useAnd,this.toggleExcludeWithUA()},e.prototype.handleEventForExcludedValueElement=function(e){var t=this,o=function(o){return e.pinFacet&&t.facet.pinFacetPosition(),e.omniboxObject&&t.omniboxCloseEvent(e.omniboxObject),t.handleSelectValue(e),!1};a.$$(this.renderer.label).on("click",function(e){e.stopPropagation(),o()}),a.$$(this.renderer.stylishCheckbox).on("keydown",r.KeyboardUtils.keypressAction([r.KEYBOARD.SPACEBAR,r.KEYBOARD.ENTER],o))},e.prototype.handleEventForValueElement=function(e){var t=this,o=function(o){e.omniboxObject&&t.omniboxCloseEvent(e.omniboxObject),t.handleExcludeClick(e),t.facet&&t.facet.facetSearch&&t.facet.facetSearch.completelyDismissSearch&&t.facet.facetSearch.completelyDismissSearch(),o.stopPropagation(),o.preventDefault()};a.$$(this.renderer.excludeIcon).on("click",o),a.$$(this.renderer.excludeIcon).on("keydown",r.KeyboardUtils.keypressAction([r.KEYBOARD.SPACEBAR,r.KEYBOARD.ENTER],o));var i=function(o){e.pinFacet&&t.facet.pinFacetPosition(),a.$$(t.renderer.checkbox).trigger("change"),o.preventDefault()};a.$$(this.renderer.label).on("click",i),a.$$(this.renderer.stylishCheckbox).on("keydown",r.KeyboardUtils.keypressAction([r.KEYBOARD.SPACEBAR,r.KEYBOARD.ENTER],i))},e.prototype.handleEventForCheckboxChange=function(e){var t=this;a.$$(this.renderer.checkbox).on("change",function(){e.omniboxObject&&t.omniboxCloseEvent(e.omniboxObject),t.handleSelectValue(e)})},e.prototype.omniboxCloseEvent=function(e){e.closeOmnibox(),e.clear()},e.prototype.getAnalyticsFacetMeta=function(){return{facetId:this.facet.options.id,facetValue:this.facetValue.value,facetTitle:this.facet.options.title}},e}();t.ValueElement=c},396:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=o(5),s=o(10),a=o(8),r=o(1),c=o(21),l=o(27),u=function(){function e(e,t){this.facet=e,this.facetValue=t}return e.prototype.withNo=function(e){return r.isArray(e)?r.each(e,function(e){e&&i.$$(e).detach()}):e&&i.$$(e).detach(),this},e.prototype.build=function(){var e=this;this.listItem=i.$$("li",{className:"coveo-facet-value coveo-facet-selectable"}).el,this.listItem.setAttribute("data-value",this.facetValue.value),this.excludeIcon=this.buildExcludeIcon(),this.listItem.appendChild(this.excludeIcon),this.label=i.$$("label",{className:"coveo-facet-value-label"}).el,this.listItem.appendChild(this.label),this.excludeIcon=this.buildExcludeIcon(),this.listItem.appendChild(this.excludeIcon),i.$$(this.excludeIcon).on("mouseover",function(){i.$$(e.listItem).addClass("coveo-facet-value-will-exclude")}),i.$$(this.excludeIcon).on("mouseout",function(){i.$$(e.listItem).removeClass("coveo-facet-value-will-exclude")}),n.Utils.exists(this.facetValue.computedField)&&(this.computedField=this.buildValueComputedField(),this.computedField&&this.label.appendChild(this.computedField),i.$$(this.label).addClass("coveo-with-computed-field"));var t=i.$$("div",{className:"coveo-facet-value-label-wrapper"}).el;return this.label.appendChild(t),this.checkbox=this.buildValueCheckbox(),t.appendChild(this.checkbox),this.stylishCheckbox=this.buildValueStylishCheckbox(),t.appendChild(this.stylishCheckbox),this.valueCount=this.buildValueCount(),this.valueCount&&t.appendChild(this.valueCount),this.valueCaption=this.buildValueCaption(),t.appendChild(this.valueCaption),this.setCssClassOnListValueElement(),this},e.prototype.setCssClassOnListValueElement=function(){i.$$(this.listItem).toggleClass("coveo-selected",this.facetValue.selected),i.$$(this.listItem).toggleClass("coveo-excluded",this.facetValue.excluded)},e.prototype.buildExcludeIcon=function(){var e=i.$$("div",{title:s.l("Exclude",this.facet.getValueCaption(this.facetValue)),className:"coveo-facet-value-exclude",tabindex:0}).el;return this.addFocusAndBlurEventListeners(e),e.innerHTML=c.SVGIcons.checkboxHookExclusionMore,l.SVGDom.addClassToSVGInContainer(e,"coveo-facet-value-exclude-svg"),e},e.prototype.buildValueComputedField=function(){var e=this.facetValue.getFormattedComputedField(this.facet.options.computedFieldFormat);if(n.Utils.isNonEmptyString(e)){var t=i.$$("span",{className:"coveo-facet-value-computed-field"}).el;return i.$$(t).text(e),t}},e.prototype.buildValueCheckbox=function(){var e=i.$$("input",{type:"checkbox"}).el;return this.facetValue.selected?e.setAttribute("checked","checked"):e.removeAttribute("checked"),this.facetValue.excluded?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled"),a.Component.pointElementsToDummyForm(e),e},e.prototype.buildValueStylishCheckbox=function(){var e=i.$$("div",{className:"coveo-facet-value-checkbox",tabindex:0}).el;return e.innerHTML=c.SVGIcons.checkboxHookExclusionMore,l.SVGDom.addClassToSVGInContainer(e,"coveo-facet-value-checkbox-svg"),this.addFocusAndBlurEventListeners(e),e},e.prototype.buildValueIcon=function(){var e=this.getValueIcon();return n.Utils.exists(e)?i.$$("img",{className:"coveo-facet-value-icon coveo-icon",src:this.getValueIcon()}).el:this.buildValueIconFromSprite()},e.prototype.getValueIcon=function(){return n.Utils.exists(this.facet.options.valueIcon)?this.facet.options.valueIcon(this.facetValue):void 0},e.prototype.buildValueIconFromSprite=function(){return i.$$("div",{className:"coveo-facet-value-icon coveo-icon "+this.facet.options.field.substr(1)+" "+this.facetValue.value}).el},e.prototype.buildValueCaption=function(){var e=this.facet.getValueCaption(this.facetValue),t=i.$$("span",{className:"coveo-facet-value-caption",title:e,"data-original-value":this.facetValue.value}).el;return i.$$(t).text(e),t},e.prototype.buildValueCount=function(){var e=this.facetValue.getFormattedCount();if(n.Utils.isNonEmptyString(e)){var t=i.$$("span",{className:"coveo-facet-value-count"}).el;return i.$$(t).text(e),t}},e.prototype.addFocusAndBlurEventListeners=function(e){var t=this;i.$$(e).on("focus",function(){return i.$$(t.listItem).addClass("coveo-focused")}),i.$$(e).on("blur",function(){return i.$$(t.listItem).removeClass("coveo-focused")})},e}();t.ValueElementRenderer=u},398:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=o(10),s=o(12);o(468);var a=o(21),r=o(27),c=function(){function e(e){this.options=e,this.element=document.createElement("div"),i.$$(this.element).addClass("coveo-facet-header")}return e.prototype.build=function(){var e=i.$$("div",{className:"coveo-facet-header-title-section"});void 0!=this.options.icon&&(this.iconElement=this.buildIcon(),e.append(this.iconElement)),e.append(this.buildTitle()),this.waitElement=this.buildWaitAnimation(),e.append(this.waitElement),this.element.appendChild(e.el);var t=i.$$("div",{className:"coveo-facet-header-settings-section"});return this.eraserElement=this.buildEraser(),t.append(this.eraserElement),this.options.facet&&(this.operatorElement=this.buildOperatorToggle(),t.append(this.operatorElement),i.$$(this.operatorElement).toggle(this.options.facet.options.enableTogglingOperator)),this.options.settingsKlass?(this.sort=this.settings=new this.options.settingsKlass(this.options.availableSorts,this.options.facet),t.append(this.settings.build())):this.options.sortKlass&&(this.sort=new this.options.sortKlass(this.options.availableSorts,this.options.facet)),this.element.appendChild(t.el),this.element},e.prototype.switchToAnd=function(){this.options.facet&&(this.options.facet.options.useAnd=!0,this.rebuildOperatorToggle(),this.updateOperatorQueryStateModel())},e.prototype.switchToOr=function(){this.options.facet&&(this.options.facet.options.useAnd=!1,this.rebuildOperatorToggle(),this.updateOperatorQueryStateModel())},e.prototype.collapseFacet=function(){this.collapseElement&&this.expandElement&&(i.$$(this.collapseElement).hide(),i.$$(this.expandElement).show()),i.$$(this.options.facetElement).addClass("coveo-facet-collapsed")},e.prototype.expandFacet=function(){this.collapseElement&&this.expandElement&&(i.$$(this.expandElement).hide(),i.$$(this.collapseElement).show()),i.$$(this.options.facetElement).removeClass("coveo-facet-collapsed")},e.prototype.updateOperatorQueryStateModel=function(){if(this.options.facet&&this.options.facet.options.enableTogglingOperator){var e="";0==this.options.facet.getSelectedValues().length&&0==this.options.facet.getExcludedValues().length||(e=this.options.facet.options.useAnd?"and":"or"),this.options.facet.queryStateModel.set(this.options.facet.operatorAttributeId,e)}},e.prototype.rebuildOperatorToggle=function(){var e=this.buildOperatorToggle();this.operatorElement&&i.$$(this.operatorElement).replaceWith(e),this.operatorElement=e},e.prototype.buildIcon=function(){var e;return e=this.options.icon?"coveo-icon-custom "+this.options.icon:"coveo-icon "+this.options.field.substr(1),this.iconElement=document.createElement("div"),i.$$(this.iconElement).addClass(e),this.iconElement},e.prototype.buildWaitAnimation=function(){return this.waitElement=i.$$("div",{className:"coveo-facet-header-wait-animation"},a.SVGIcons.loading).el,r.SVGDom.addClassToSVGInContainer(this.waitElement,"coveo-facet-header-wait-animation-svg"),this.waitElement.style.visibility="hidden",this.waitElement},e.prototype.buildCollapse=function(){var e=this,t=i.$$("span",{clasName:"coveo-icon"}),o=i.$$("div",{title:n.l("Collapse"),className:"coveo-facet-header-collapse"});return o.append(t.el),o.on("click",function(){return e.collapseFacet()}),o.el},e.prototype.buildExpand=function(){var e=this,t=document.createElement("span");i.$$(t).addClass("coveo-icon");var o=document.createElement("div");return o.setAttribute("title",n.l("Expand")),i.$$(o).hide(),i.$$(o).addClass("coveo-facet-header-expand"),o.appendChild(t),i.$$(o).on("click",function(){return e.expandFacet()}),o},e.prototype.buildOperatorToggle=function(){var e=this,t=i.$$("span",{className:"coveo-"+(this.options.facet.options.useAnd?"and":"or")},a.SVGIcons.orAnd);r.SVGDom.addClassToSVGInContainer(t.el,"coveo-or-and-svg");var o=i.$$("div",{className:"coveo-facet-header-operator",title:n.l("SwitchTo",this.options.facet.options.useAnd?n.l("Or"):n.l("And"))});return o.append(t.el),i.$$(o).on("click",function(){return e.handleOperatorClick()}),o.el},e.prototype.handleOperatorClick=function(){var e=this;if(this.options.facet.options.useAnd?this.options.facet.switchToOr():this.options.facet.switchToAnd(),0!=this.options.facet.getSelectedValues().length){var t=this.options.facet.options.useAnd?"AND":"OR",o=this.options.facet.options.useAnd?"OR":"AND";this.options.facet.triggerNewQuery(function(){return e.options.facet.usageAnalytics.logSearchEvent(s.analyticsActionCauseList.facetToggle,{facetId:e.options.facet.options.id,facetOperatorBefore:o,facetOperatorAfter:t,facetTitle:e.options.title})})}},e.prototype.buildTitle=function(){var e=i.$$("div",{title:this.options.title,className:"coveo-facet-header-title"});return e.text(this.options.title),e.el},e.prototype.buildEraser=function(){var e=this,t=i.$$("div",{title:n.l("Clear",this.options.title),className:"coveo-facet-header-eraser"},a.SVGIcons.mainClear);return r.SVGDom.addClassToSVGInContainer(t.el,"coveo-facet-header-eraser-svg"),t.on("click",function(){var t=e.options.facet||e.options.facetSlider;t.reset(),t.usageAnalytics.logSearchEvent(s.analyticsActionCauseList.facetClearAll,{facetId:t.options.id,facetTitle:t.options.title}),t.queryController.executeQuery()}),t.el},e}();t.FacetHeader=c},400:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=o(78),s=o(89),a=o(8),r=o(13),c=o(10),l=o(5),u=o(390),h=o(391),d=o(392),p=o(11),f=o(20),v=o(40),m=o(1);o(469);var g=function(){function e(e,t,o,i){this.coveoRoot=e,this.ID=t,this.componentsInFacetColumn=[],this.preservePositionOriginalValues=[],this.dropdownHeaderLabel=this.getDropdownHeaderLabel(),this.dropdown=this.buildDropdown(i),this.searchInterface=a.Component.get(this.coveoRoot.el,f.SearchInterface,!1),this.bindDropdownContentEvents(),this.registerOnCloseHandler(),this.registerQueryEvents(),this.logger=new r.Logger(this),l.Utils.isNullOrUndefined(o.responsiveBreakpoint)?this.breakpoint=this.searchInterface?this.searchInterface.responsiveComponents.getMediumScreenWidth():(new v.ResponsiveComponents).getMediumScreenWidth():this.breakpoint=o.responsiveBreakpoint}return e.init=function(t,o,s,a,c){if(!i.$$(o).find(".coveo-facet-column")){return void new r.Logger("ResponsiveFacets").info("No element with class coveo-facet-column. Responsive facets cannot be enabled")}n.ResponsiveComponentsManager.register(e,i.$$(o),"ResponsiveFacetColumn",s,a),n.ResponsiveComponentsManager.register(t,i.$$(o),c,s,a)},e.prototype.registerComponent=function(e){return this.componentsInFacetColumn.push(e),this.preservePositionOriginalValues.push(e.options.preservePosition),!0},e.prototype.needDropdownWrapper=function(){return this.needSmallMode()},e.prototype.handleResizeEvent=function(){this.needSmallMode()&&!s.ResponsiveComponentsUtils.isSmallFacetActivated(this.coveoRoot)?this.changeToSmallMode():!this.needSmallMode()&&s.ResponsiveComponentsUtils.isSmallFacetActivated(this.coveoRoot)&&this.changeToLargeMode(),this.dropdown.isOpened&&this.dropdown.dropdownContent.positionDropdown()},e.prototype.dismissFacetSearches=function(){m.each(this.componentsInFacetColumn,function(e){e.facetSearch&&e.facetSearch.currentlyDisplayedResults&&e.facetSearch.completelyDismissSearch()})},e.prototype.needSmallMode=function(){return this.coveoRoot.width()<=this.breakpoint},e.prototype.changeToSmallMode=function(){this.dropdown.close(),this.disableFacetPreservePosition(),i.$$(this.coveoRoot.find("."+n.ResponsiveComponentsManager.DROPDOWN_HEADER_WRAPPER_CSS_CLASS)).append(this.dropdown.dropdownHeader.element.el),s.ResponsiveComponentsUtils.activateSmallFacet(this.coveoRoot)},e.prototype.changeToLargeMode=function(){this.restoreFacetPreservePositionValue(),this.dropdown.cleanUp(),s.ResponsiveComponentsUtils.deactivateSmallFacet(this.coveoRoot)},e.prototype.buildDropdown=function(e){var t=this.buildDropdownContent(),o=this.buildDropdownHeader();return e||new u.ResponsiveDropdown(t,o,this.coveoRoot)},e.prototype.buildDropdownContent=function(){var t=i.$$(this.coveoRoot.find(".coveo-facet-column")),o=i.$$("div",{className:"coveo-facet-header-filter-by-container",style:"display: none"}),n=i.$$("div",{className:"coveo-facet-header-filter-by"});return n.text(c.l("Filter by:")),o.append(n.el),t.prepend(o.el),new h.ResponsiveDropdownContent("facet",t,this.coveoRoot,e.DROPDOWN_MIN_WIDTH,e.DROPDOWN_WIDTH_RATIO)},e.prototype.buildDropdownHeader=function(){var e=i.$$("a"),t=i.$$("p");return t.text(this.dropdownHeaderLabel),e.el.appendChild(t.el),new d.ResponsiveDropdownHeader("facet",e)},e.prototype.registerOnCloseHandler=function(){this.dropdown.registerOnCloseHandler(this.dismissFacetSearches,this)},e.prototype.registerQueryEvents=function(){var e=this;this.coveoRoot.on(p.QueryEvents.noResults,function(){return e.handleNoResults()}),this.coveoRoot.on(p.QueryEvents.querySuccess,function(t,o){return e.handleQuerySuccess(o)}),this.coveoRoot.on(p.QueryEvents.queryError,function(){return e.handleQueryError()})},e.prototype.bindDropdownContentEvents=function(){var t=this;this.dropdown.dropdownContent.element.on("scroll",m.debounce(function(){m.each(t.componentsInFacetColumn,function(e){var o=e.facetSearch;o&&o.currentlyDisplayedResults&&!t.isFacetSearchScrolledIntoView(o.search)?e.facetSearch.positionSearchResults(t.dropdown.dropdownContent.element.el):o&&e.facetSearch.currentlyDisplayedResults&&e.facetSearch.positionSearchResults()})},e.DEBOUNCE_SCROLL_WAIT))},e.prototype.restoreFacetPreservePositionValue=function(){var e=this;m.each(this.componentsInFacetColumn,function(t,o){t.options&&(t.options.preservePosition=e.preservePositionOriginalValues[o])})},e.prototype.disableFacetPreservePosition=function(){m.each(this.componentsInFacetColumn,function(e){e.options&&(e.options.preservePosition=!1)})},e.prototype.isFacetSearchScrolledIntoView=function(e){var t=e.getBoundingClientRect().top,o=e.getBoundingClientRect().bottom,i=this.dropdown.dropdownContent.element.el.getBoundingClientRect().top,n=this.dropdown.dropdownContent.element.el.getBoundingClientRect().bottom;return i=i>=0?i:0,t>=i&&o<=n},e.prototype.getDropdownHeaderLabel=function(){var t,o="."+a.Component.computeCssClassNameForType("Facet")+", ."+a.Component.computeCssClassNameForType("FacetSlider");return m.each(i.$$(this.coveoRoot.find(".coveo-facet-column")).findAll(o),function(e){var o;o=(i.$$(e).hasClass(a.Component.computeCssClassNameForType("Facet")),a.Component.get(e)),!t&&o.options.dropdownHeaderLabel&&(t=o.options.dropdownHeaderLabel)}),t||(t=c.l(e.DROPDOWN_HEADER_LABEL_DEFAULT_VALUE)),t},e.prototype.handleNoResults=function(){this.dropdown.dropdownHeader.hide()},e.prototype.handleQueryError=function(){this.dropdown.dropdownHeader.hide()},e.prototype.handleQuerySuccess=function(e){0===e.results.totalCount?this.dropdown.dropdownHeader.hide():this.dropdown.dropdownHeader.show()},e}();g.DEBOUNCE_SCROLL_WAIT=250,g.DROPDOWN_MIN_WIDTH=280,g.DROPDOWN_WIDTH_RATIO=.35,g.DROPDOWN_HEADER_LABEL_DEFAULT_VALUE="Filters",t.ResponsiveFacetColumn=g},401:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(7),n=o(19),s=o(12),a=o(3),r=o(1);o(471);var c=o(21),l=o(27),u=function(){function e(e,t){this.facet=e,this.facetValue=t}return e.prototype.build=function(e){var t=this;void 0===e&&(e=!0),i.Assert.exists(this.facetValue);var o=n.DeviceUtils.isMobileDevice()?a.$$("div"):a.$$("span");o.addClass("coveo-facet-breadcrumb-value"),o.toggleClass("coveo-selected",this.facetValue.selected),o.toggleClass("coveo-excluded",this.facetValue.excluded),o.el.setAttribute("title",this.getBreadcrumbTooltip());var r=a.$$("span",{className:"coveo-facet-breadcrumb-caption"});r.text(this.facet.getValueCaption(this.facetValue)),o.el.appendChild(r.el);var u=a.$$("span",{className:"coveo-facet-breadcrumb-clear"},c.SVGIcons.checkboxHookExclusionMore);l.SVGDom.addClassToSVGInContainer(u.el,"coveo-facet-breadcrumb-clear-svg"),o.el.appendChild(u.el);var h=!1;return o.on("click",function(){h||(h=!0,t.facetValue.excluded?t.facet.unexcludeValue(t.facetValue.value):t.facet.deselectValue(t.facetValue.value),t.facet.triggerNewQuery(function(){return t.facet.usageAnalytics.logSearchEvent(s.analyticsActionCauseList.breadcrumbFacet,{facetId:t.facet.options.id,facetValue:t.facetValue.value,facetTitle:t.facet.options.title})}))}),o},e.prototype.getBreadcrumbTooltip=function(){var e=[this.facet.getValueCaption(this.facetValue),this.facetValue.getFormattedCount(),this.facetValue.getFormattedComputedField(this.facet.options.computedFieldFormat)];return r.compact(e).join(" ")},e}();t.BreadcrumbValueElement=u},402:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(7),n=o(10),s=o(3),a=o(24),r=o(1),c=o(21),l=o(27),u=function(){function e(e,t,o){this.facet=e,this.facetValues=t,this.breadcrumbValueElementKlass=o,this.setExpandedAndCollapsed(),this.elem=s.$$("div",{className:"coveo-facet-breadcrumb"}).el;var i=s.$$("span");i.addClass("coveo-facet-breadcrumb-title"),i.text(this.facet.options.title+":"),this.elem.appendChild(i.el),this.valueContainer=s.$$("span",{className:"coveo-facet-breadcrumb-values"}).el,this.elem.appendChild(this.valueContainer)}return e.prototype.build=function(){return this.buildExpanded(),0!=this.collapsed.length&&this.buildCollapsed(),this.elem},e.prototype.buildAsString=function(){return this.build(),this.elem?this.facet.options.title+": "+r.map(s.$$(this.elem).findAll(".coveo-facet-breadcrumb-value"),function(e){return s.$$(e).text()}).join(", "):""},e.prototype.buildExpanded=function(){var e=this;r.each(this.expanded,function(t,o){var i=new e.breadcrumbValueElementKlass(e.facet,t).build();e.valueContainer.appendChild(i.el)})},e.prototype.buildCollapsed=function(){var e=this,t=r.filter(this.collapsed,function(e){return e.selected}).length,o=r.filter(this.collapsed,function(e){return e.excluded}).length;i.Assert.check(t+o==this.collapsed.length);var u=s.$$("div",{className:"coveo-facet-breadcrumb-value"});if(t>0){var h=s.$$("span",{className:"coveo-facet-breadcrumb-multi-count"});h.text(n.l("NMore",a.format(t,"n0"))),u.el.appendChild(h.el);var d=s.$$("div",{className:"coveo-selected coveo-facet-breadcrumb-multi-icon"},c.SVGIcons.checkboxHookExclusionMore);l.SVGDom.addClassToSVGInContainer(d.el,"coveo-facet-breadcrumb-multi-icon-svg"),u.el.appendChild(d.el)}if(o>0){var p=s.$$("span",{className:"coveo-facet-breadcrumb-multi-count"});p.text(n.l("NMore",a.format(o,"n0"))),u.el.appendChild(p.el);var f=s.$$("div",{className:"coveo-excluded coveo-facet-breadcrumb-multi-icon"},c.SVGIcons.checkboxHookExclusionMore);l.SVGDom.addClassToSVGInContainer(f.el,"coveo-facet-breadcrumb-multi-icon-svg"),u.el.appendChild(f.el)}var v=r.map(this.collapsed,function(t){return new e.breadcrumbValueElementKlass(e.facet,t)}),m=r.map(v,function(e){return e.getBreadcrumbTooltip()});u.el.setAttribute("title",m.join("\n")),u.on("click",function(){var e=[];r.forEach(v,function(t){e.push(t.build(!1).el)}),r.each(e,function(e){s.$$(e).insertBefore(u.el)}),u.detach()}),this.valueContainer.appendChild(u.el)},e.prototype.setExpandedAndCollapsed=function(){this.facetValues.length>this.facet.options.numberOfValuesInBreadcrumb?(this.collapsed=r.rest(this.facetValues,this.facet.options.numberOfValuesInBreadcrumb-1),this.expanded=r.first(this.facetValues,this.facet.options.numberOfValuesInBreadcrumb-1)):(this.collapsed=[],this.expanded=this.facetValues)},e}();t.BreadcrumbValueList=u},403:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=o(57),n=o(3),s=o(5),a=o(15),r=o(263),c=o(241),l=o(12),u=o(8),h=o(50),d=o(10),p=o(7),f=o(22),v=o(91),m=o(18),g=o(90),y=o(26),S=o(20),b=o(89),C=o(264),V=o(1);o(473);var x=o(21),w=o(27),E=function(){function t(e,t,o){var s=this;this.facet=e,this.facetSearchValuesListKlass=t,this.root=o,this.showingFacetSearchWaitAnimation=!1,this.moreValuesToFetch=!0,this.searchBarIsAnimating=!1,this.lastSearchWasEmpty=!0,this.searchResults=document.createElement("ul"),n.$$(this.searchResults).addClass("coveo-facet-search-results"),this.onResize=V.debounce(function(){s.facet instanceof i.Facet&&s.facet.searchInterface instanceof S.SearchInterface&&s.shouldPositionSearchResults()&&s.positionSearchResults()},250),this.onDocumentClick=function(e){s.handleClickElsewhere(e)},window.addEventListener("resize",function(){return s.onResize()}),document.addEventListener("click",function(e){return s.onDocumentClick(e)}),n.$$(e.root).on(a.InitializationEvents.nuke,function(){return s.handleNuke()})}return t.prototype.build=function(){return this.buildBaseSearch()},t.prototype.positionSearchResults=function(e){if(void 0===e&&(e=this.search),null!=this.searchResults){this.searchResults.style.display="block",this.searchResults.style.width=this.facet.element.clientWidth-40+"px","none"==n.$$(this.searchResults).css("display")&&(this.searchResults.style.display="");if("none"==n.$$(this.search).css("display")||this.searchBarIsAnimating){"none"==n.$$(this.searchResults).css("display")&&(this.searchResults.style.display="");var t=this;r.EventsUtils.addPrefixedEvent(this.search,"AnimationEnd",function(o){h.PopupUtils.positionPopup(t.searchResults,e,t.root,{horizontal:h.HorizontalAlignment.CENTER,vertical:h.VerticalAlignment.BOTTOM}),r.EventsUtils.removePrefixedEvent(t.search,"AnimationEnd",this)})}else h.PopupUtils.positionPopup(this.searchResults,e,this.root,{horizontal:h.HorizontalAlignment.CENTER,vertical:h.VerticalAlignment.BOTTOM})}},t.prototype.completelyDismissSearch=function(){this.cancelAnyPendingSearchOperation(),this.facet.unfadeInactiveValuesInMainList(),n.$$(this.searchResults).empty(),this.moreValuesToFetch=!0,n.$$(this.search).removeClass("coveo-facet-search-no-results"),n.$$(this.facet.element).removeClass("coveo-facet-searching"),this.hideSearchResultsElement(),this.input.value="",n.$$(this.clear).hide(),this.currentlyDisplayedResults=void 0},t.prototype.triggerNewFacetSearch=function(e){var t=this;this.cancelAnyPendingSearchOperation(),this.showFacetSearchWaitingAnimation(),this.facet.logger.info("Triggering new facet search"),this.facetSearchPromise=this.facet.facetQueryController.search(e),this.facetSearchPromise&&this.facetSearchPromise.then(function(o){t.facet.usageAnalytics.logCustomEvent(l.analyticsActionCauseList.facetSearch,{facetId:t.facet.options.id,facetTitle:t.facet.options.title},t.facet.root),t.facet.logger.debug("Received field values",o),t.processNewFacetSearchResults(o,e),t.hideFacetSearchWaitingAnimation(),t.facetSearchPromise=void 0}).catch(function(e){return s.Utils.exists(e)&&(t.facet.logger.error("Error while retrieving facet values",e),t.hideFacetSearchWaitingAnimation()),t.facetSearchPromise=void 0,null})},t.prototype.focus=function(){this.input.focus(),this.handleFacetSearchFocus()},t.prototype.shouldPositionSearchResults=function(){return!b.ResponsiveComponentsUtils.isSmallFacetActivated(n.$$(this.root))&&n.$$(this.facet.element).hasClass("coveo-facet-searching")},t.prototype.buildBaseSearch=function(){var e=this;return this.search=document.createElement("div"),n.$$(this.search).addClass("coveo-facet-search"),this.magnifier=document.createElement("div"),this.magnifier.innerHTML=x.SVGIcons.search,n.$$(this.magnifier).addClass("coveo-facet-search-magnifier"),w.SVGDom.addClassToSVGInContainer(this.magnifier,"coveo-facet-search-magnifier-svg"),this.search.appendChild(this.magnifier),this.wait=document.createElement("div"),this.wait.innerHTML=x.SVGIcons.loading,n.$$(this.wait).addClass("coveo-facet-search-wait-animation"),w.SVGDom.addClassToSVGInContainer(this.wait,"coveo-facet-search-wait-animation-svg"),this.search.appendChild(this.wait),this.hideFacetSearchWaitingAnimation(),this.clear=n.$$("div",{className:"coveo-facet-search-clear",title:d.l("Clear",d.l("Search"))},x.SVGIcons.checkboxHookExclusionMore).el,w.SVGDom.addClassToSVGInContainer(this.clear,"coveo-facet-search-clear-svg"),this.clear.style.display="none",this.search.appendChild(this.clear),this.middle=document.createElement("div"),n.$$(this.middle).addClass("coveo-facet-search-middle"),this.search.appendChild(this.middle),this.input=document.createElement("input"),this.input.setAttribute("type","text"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("autocorrect","off"),n.$$(this.input).addClass("coveo-facet-search-input"),u.Component.pointElementsToDummyForm(this.input),this.middle.appendChild(this.input),n.$$(this.input).on("keyup",function(t){return e.handleFacetSearchKeyUp(t)}),n.$$(this.clear).on("click",function(t){return e.handleFacetSearchClear()}),n.$$(this.input).on("focus",function(t){return e.handleFacetSearchFocus()}),this.detectSearchBarAnimation(),this.root.appendChild(this.searchResults),this.searchResults.style.display="none",this.search},t.prototype.handleFacetSearchKeyUp=function(e){p.Assert.exists(e);var t=""==this.input.value.trim();this.showOrHideClearElement(t),this.handleKeyboardNavigation(e,t)},t.prototype.handleNuke=function(){window.removeEventListener("resize",this.onResize),document.removeEventListener("click",this.onDocumentClick)},t.prototype.handleFacetSearchFocus=function(){null==this.currentlyDisplayedResults&&this.startNewSearchTimeout(this.buildParamsForExcludingCurrentlyDisplayedValues())},t.prototype.handleClickElsewhere=function(e){this.currentlyDisplayedResults&&this.search!=e.target&&this.searchResults!=e.target&&this.input!=e.target&&this.completelyDismissSearch()},t.prototype.handleFacetSearchClear=function(){this.input.value="",n.$$(this.clear).hide(),this.completelyDismissSearch()},t.prototype.showOrHideClearElement=function(e){e?(n.$$(this.clear).hide(),n.$$(this.search).removeClass("coveo-facet-search-no-results")):n.$$(this.clear).show()},t.prototype.handleKeyboardNavigation=function(e,t){switch(e.which){case f.KEYBOARD.ENTER:this.keyboardNavigationEnterPressed(e,t);break;case f.KEYBOARD.DELETE:this.keyboardNavigationDeletePressed(e);break;case f.KEYBOARD.ESCAPE:this.completelyDismissSearch();break;case f.KEYBOARD.DOWN_ARROW:this.moveCurrentResultDown();break;case f.KEYBOARD.UP_ARROW:this.moveCurrentResultUp();break;default:this.moreValuesToFetch=!0,this.highlightCurrentQueryWithinSearchResults(),t?this.lastSearchWasEmpty||(this.currentlyDisplayedResults=void 0,n.$$(this.searchResults).empty(),this.lastSearchWasEmpty=!0,this.startNewSearchTimeout(this.buildParamsForFetchingMore())):(this.lastSearchWasEmpty=!1,this.startNewSearchTimeout(this.buildParamsForNormalSearch()))}},t.prototype.keyboardNavigationEnterPressed=function(e,t){e.shiftKey?this.triggerNewFacetSearch(this.buildParamsForNormalSearch()):"none"!=this.searchResults.style.display?(this.performSelectActionOnCurrentSearchResult(),this.completelyDismissSearch()):n.$$(this.search).is(".coveo-facet-search-no-results")&&!t&&this.selectAllValuesMatchingSearch()},t.prototype.keyboardNavigationDeletePressed=function(e){e.shiftKey&&(this.performExcludeActionOnCurrentSearchResult(),this.completelyDismissSearch(),this.input.value="")},t.prototype.startNewSearchTimeout=function(e){var t=this;this.cancelAnyPendingSearchOperation(),this.facetSearchTimeout=setTimeout(function(){t.getValueInInputForFacetSearch();t.triggerNewFacetSearch(e)},this.facet.options.facetSearchDelay)},t.prototype.cancelAnyPendingSearchOperation=function(){s.Utils.exists(this.facetSearchTimeout)&&(clearTimeout(this.facetSearchTimeout),this.facetSearchTimeout=void 0),s.Utils.exists(this.facetSearchPromise)&&(e.reject(this.facetSearchPromise).catch(function(){}),this.facetSearchPromise=void 0),this.hideFacetSearchWaitingAnimation()},t.prototype.processNewFacetSearchResults=function(e,t){p.Assert.exists(e),e=new C.FacetValuesOrder(this.facet,this.facet.facetSort).reorderValues(e),e.length>0?(n.$$(this.search).removeClass("coveo-facet-search-no-results"),this.facet.fadeInactiveValuesInMainList(this.facet.options.facetSearchDelay),this.rebuildSearchResults(e,t),t.fetchMore||this.showSearchResultsElement(),this.highlightCurrentQueryWithinSearchResults(),this.makeFirstSearchResultTheCurrentOne()):t.fetchMore?this.moreValuesToFetch=!1:(this.hideSearchResultsElement(),n.$$(this.search).addClass("coveo-facet-search-no-results"))},t.prototype.rebuildSearchResults=function(e,t){var o=this;p.Assert.exists(e),t.fetchMore||n.$$(this.searchResults).empty();var i=document.createElement("li");s.Utils.isNonEmptyString(t.valueToSearch)&&(n.$$(i).addClass(["coveo-facet-selectable","coveo-facet-search-selectable","coveo-facet-search-select-all"]),n.$$(i).text(d.l("SelectAll")),n.$$(i).on("click",function(){return o.selectAllValuesMatchingSearch()}),this.searchResults.appendChild(i));var a=V.map(e,function(e){return v.FacetValue.create(e)});V.each(new this.facetSearchValuesListKlass(this.facet,g.FacetValueElement).build(a),function(e){o.searchResults.appendChild(e)}),this.currentlyDisplayedResults?this.currentlyDisplayedResults=this.currentlyDisplayedResults.concat(V.pluck(a,"value")):this.currentlyDisplayedResults=V.pluck(a,"value"),V.each(n.$$(this.searchResults).findAll(".coveo-facet-selectable"),function(e){n.$$(e).addClass("coveo-facet-search-selectable"),o.setupFacetSearchResultsEvents(e)}),n.$$(this.searchResults).on("scroll",function(){return o.handleFacetSearchResultsScroll()})},t.prototype.setupFacetSearchResultsEvents=function(e){var t=this;n.$$(e).on("mousemove",function(){t.makeCurrentResult(e)});var o=!1,i=!1;n.$$(e).on("mousedown",function(){return i=!1}),n.$$(e).on("mousemove",function(){return i=!0}),n.$$(e).on("touchmove",function(){return o=!0}),n.$$(e).on("mouseup touchend",function(){o||i||setTimeout(function(){t.completelyDismissSearch()},0),o=!1,i=!1})},t.prototype.handleFacetSearchResultsScroll=function(){if(!this.facetSearchPromise&&""==this.getValueInInputForFacetSearch()&&this.moreValuesToFetch){var e=this.searchResults.clientHeight;this.searchResults.scrollHeight-(this.searchResults.scrollTop+e)<e/2&&this.triggerNewFacetSearch(this.buildParamsForFetchingMore())}},t.prototype.buildParamsForNormalSearch=function(){var e=new c.FacetSearchParameters(this.facet);return e.setValueToSearch(this.getValueInInputForFacetSearch()),e.fetchMore=!1,e},t.prototype.buildParamsForFetchingMore=function(){var e=this.buildParamsForExcludingCurrentlyDisplayedValues();return e.fetchMore=!0,e},t.prototype.buildParamsForExcludingCurrentlyDisplayedValues=function(){var e=new c.FacetSearchParameters(this.facet);return e.excludeCurrentlyDisplayedValuesInSearch(this.searchResults),e.setValueToSearch(this.getValueInInputForFacetSearch()),e},t.prototype.showSearchResultsElement=function(){this.positionSearchResults()},t.prototype.hideSearchResultsElement=function(){this.searchResults.style.display="none"},t.prototype.highlightCurrentQueryWithinSearchResults=function(){var e=this,t=n.$$(this.searchResults).findAll(".coveo-facet-value-caption");V.each(t,function(t){var o=e.getValueInInputForFacetSearch(),i=new RegExp("("+m.StringUtils.wildcardsToRegex(o,e.facet.options.facetSearchIgnoreAccents)+")","ig"),s=n.$$(t).text(),a=s.replace(i,'<span class="coveo-highlight">$1</span>');t.innerHTML=a})},t.prototype.makeFirstSearchResultTheCurrentOne=function(){this.makeCurrentResult(this.getSelectables()[0])},t.prototype.makeCurrentResult=function(e){V.each(this.getSelectables(),function(e){n.$$(e).removeClass("coveo-current")}),n.$$(e).addClass("coveo-current")},t.prototype.moveCurrentResultDown=function(){var e=n.$$(this.searchResults).find(".coveo-current");V.each(this.getSelectables(),function(e){n.$$(e).removeClass("coveo-current")});var t,o=this.getSelectables(),i=V.indexOf(o,e);t=i<o.length-1?n.$$(o[i+1]):n.$$(o[0]),this.highlightAndShowCurrentResultWithKeyboard(t)},t.prototype.moveCurrentResultUp=function(){var e=n.$$(this.searchResults).find(".coveo-current");V.each(n.$$(this.searchResults).findAll(".coveo-facet-selectable"),function(e){n.$$(e).removeClass("coveo-current")});var t,o=this.getSelectables(),i=V.indexOf(o,e);t=i>0?n.$$(o[i-1]):n.$$(o[o.length-1]),this.highlightAndShowCurrentResultWithKeyboard(t)},t.prototype.highlightAndShowCurrentResultWithKeyboard=function(e){e.addClass("coveo-current"),this.searchResults.scrollTop=e.el.offsetTop},t.prototype.getSelectables=function(e){return void 0===e&&(e=this.searchResults),n.$$(e).findAll(".coveo-facet-selectable")},t.prototype.performSelectActionOnCurrentSearchResult=function(){var e=n.$$(this.searchResults).find(".coveo-current");p.Assert.check(void 0!=e);var t=n.$$(e).find('input[type="checkbox"]');void 0!=t?(t.checked=!0,n.$$(t).trigger("change")):e.click()},t.prototype.performExcludeActionOnCurrentSearchResult=function(){var e=n.$$(this.searchResults).find(".coveo-current");p.Assert.check(null!=e);var t=n.$$(e).find(".coveo-facet-value-caption");this.facet.facetValuesList.get(n.$$(t).text()).toggleExcludeWithUA()},t.prototype.getValueInInputForFacetSearch=function(){return this.input.value.trim()},t.prototype.selectAllValuesMatchingSearch=function(){var e=this;this.facet.showWaitingAnimation();var t=new c.FacetSearchParameters(this.facet);t.nbResults=1e3,t.setValueToSearch(this.getValueInInputForFacetSearch()),this.facet.facetQueryController.search(t).then(function(t){e.completelyDismissSearch(),y.ModalBox.close(!0);var o=V.map(t,function(t){var o=e.facet.values.get(t.value);return s.Utils.exists(o)||(o=v.FacetValue.create(t)),o.selected=!0,o.excluded=!1,o});e.facet.processFacetSearchAllResultsSelected(o)}),this.completelyDismissSearch()},t.prototype.showFacetSearchWaitingAnimation=function(){n.$$(this.magnifier).hide(),n.$$(this.wait).show(),this.showingFacetSearchWaitAnimation=!0},t.prototype.hideFacetSearchWaitingAnimation=function(){n.$$(this.magnifier).show(),n.$$(this.wait).hide(),this.showingFacetSearchWaitAnimation=!1},t.prototype.detectSearchBarAnimation=function(){var e=this;r.EventsUtils.addPrefixedEvent(this.search,"AnimationStart",function(t){"grow"==t.animationName&&(e.searchBarIsAnimating=!0)}),r.EventsUtils.addPrefixedEvent(this.search,"AnimationEnd",function(t){"grow"==t.animationName&&(e.searchBarIsAnimating=!1)})},t}();t.FacetSearch=E}).call(t,o(6))},404:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),n=function(){function e(e,t){this.facet=e,this.facetValueElementKlass=t}return e.prototype.build=function(e){var t=this,o=i.map(e,function(e){return i.find(t.facet.values.getAll(),function(t){return t.value==e.value})||e});return i.map(o,function(e){return new t.facetValueElementKlass(t.facet,e,t.facet.keepDisplayedValuesNextTime).build().renderer.listItem})},e}();t.FacetSearchValuesList=n},405:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(90),n=o(3),s=o(91),a=o(5),r=o(42),c=o(264),l=o(1),u=function(){function e(e,t){this.facet=e,this.facetValueElementKlass=t,this.valueList={},this.currentlyDisplayed=[]}return e.prototype.build=function(){return this.valueContainer=document.createElement("ul"),n.$$(this.valueContainer).addClass("coveo-facet-values"),this.valueContainer},e.prototype.getAllCurrentlyDisplayed=function(){return this.currentlyDisplayed},e.prototype.getAll=function(){return l.toArray(this.valueList)},e.prototype.getAllFacetValue=function(){return l.map(this.getAll(),function(e){return e.facetValue})},e.prototype.get=function(e){var t;return e instanceof s.FacetValue?t=e.value:(e=a.Utils.anyTypeToString(e),t=e),this.ensureFacetValueIsInList(e),this.valueList[t.toLowerCase()]},e.prototype.select=function(e){var t=this.get(e);return t.select(),t},e.prototype.unselect=function(e){var t=this.get(e);return t.unselect(),t},e.prototype.exclude=function(e){var t=this.get(e);return t.exclude(),t},e.prototype.unExclude=function(e){var t=this.get(e);return t.unexclude(),t},e.prototype.toggleSelect=function(e){var t=this.get(e);return t.facetValue.selected?t.unselect():t.select(),t},e.prototype.toggleExclude=function(e){var t=this.get(e);return t.facetValue.excluded?t.unexclude():t.exclude(),t},e.prototype.rebuild=function(e){var t=this;n.$$(this.valueContainer).empty(),this.currentlyDisplayed=[];var o=this.getValuesToBuildWith(),i=e,s=document.createDocumentFragment();l.each(o,function(e,o,n){if(t.facetValueShouldBeRemoved(e))t.facet.values.remove(e.value),i+=1;else if(o<i){var a=new t.facetValueElementKlass(t.facet,e,!0);t.valueList[e.value.toLowerCase()]=a;var r=a.build().renderer.listItem;s.appendChild(r),t.currentlyDisplayed.push(a)}}),this.valueContainer.appendChild(s),r.FacetUtils.addNoStateCssClassToFacetValues(this.facet,this.valueContainer)},e.prototype.getValuesToBuildWith=function(){return this.facet.facetSort?new c.FacetValuesOrder(this.facet,this.facet.facetSort).reorderValues(this.facet.values.getAll()):this.facet.values.getAll()},e.prototype.facetValueShouldBeRemoved=function(e){return!(0!=e.occurrences||0!=e.delta&&void 0!=e.delta||e.selected||e.excluded||this.facet.keepDisplayedValuesNextTime)},e.prototype.ensureFacetValueIsInList=function(e){var t;e instanceof s.FacetValue?null==(t=this.facet.values.get(e.value))&&(this.facet.values.add(e),t=e):null==(t=this.facet.values.get(e))&&(t=s.FacetValue.createFromValue(e),this.facet.values.add(t));var o=t.value.toLowerCase(),n=this.valueList[o];void 0==n?(n=this.valueList[o]=new i.FacetValueElement(this.facet,t,!0),n.build()):n.facetValue=t},e}();t.FacetValuesList=u},406:function(e,t,o){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=o(395),s=function(e){function t(t,o,i,n,s){var a=e.call(this,t,o,n,s)||this;return a.facet=t,a.facetValue=o,a.eventArg=i,a}return i(t,e),t.prototype.bindEvent=function(){e.prototype.bindEvent.call(this,{displayNextTime:!1,pinFacet:!1,omniboxObject:this.eventArg})},t}(n.ValueElement);t.OmniboxValueElement=s},407:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=o(5),s=o(42),a=o(1),r=function(){function e(e,t,o,i){this.facet=e,this.facetValues=t,this.omniboxObject=o,this.omniboxValueElementKlass=i}return e.prototype.build=function(){var e=this,t=[];return a.each(this.facetValues,function(o){t.push(e.buildOmniboxForOneRow(o,e.omniboxObject))}),this.buildFinalOmniboxElement(t)},e.prototype.buildOmniboxForOneRow=function(e,t){var o=this,n=function(e,t){return o.logAnalyticsEvent(e,t)},s=function(e,t){return o.logAnalyticsEvent(e,t)},a=new this.omniboxValueElementKlass(this.facet,e,t,n,s),r=a.build().renderer.listItem,c=t.completeQueryExpression.regex,l=t.completeQueryExpression.word;i.$$(r).find(".coveo-facet-value-caption").innerHTML=this.highlightOmniboxMatch(this.facet.getValueCaption(e),c,l);var u=i.$$("div",{className:"coveo-omnibox-selectable coveo-facet-value coveo-omnibox-facet-value"}).el;return u.appendChild(r),i.$$(u).on("keyboardSelect",function(){var e=i.$$(r).find("input[type=checkbox]");i.$$(e).trigger("change")}),u["no-text-suggestion"]=!0,u},e.prototype.buildFinalOmniboxElement=function(e){var t=this.buildOmniboxHeader();if(!n.Utils.isEmptyArray(e)){var o=i.$$("div",{className:"coveo-omnibox-facet-value"}).el;return o.appendChild(t),a.each(e,function(e){o.appendChild(e)}),s.FacetUtils.addNoStateCssClassToFacetValues(this.facet,o),o}},e.prototype.buildOmniboxHeader=function(){var e=this.facet.options.title,t=i.$$("div",{className:"coveo-omnibox-facet-header"}).el;return i.$$(t).text(e),t},e.prototype.highlightOmniboxMatch=function(e,t,o){var i=e.search(t),n=i+o.length;return e.slice(0,i)+'<span class="coveo-highlight">'+e.slice(i,n)+"</span>"+e.slice(n)},e.prototype.logAnalyticsEvent=function(e,t){var o=a.pluck(this.facetValues,"value");e.facet.usageAnalytics.logSearchEvent(t,{query:this.omniboxObject.completeQueryExpression.word,facetId:e.facet.options.id,facetTitle:e.facet.options.title,facetValue:e.facetValue.value,suggestions:o.join(";"),suggestionRanking:a.indexOf(o,e.facetValue.value)})},e}();t.OmniboxValuesList=r},447:function(e,t){e.exports='<svg enable-background="new 0 0 10 6" viewBox="0 0 10 6" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="m5 5.932c-.222 0-.443-.084-.612-.253l-4.134-4.134c-.338-.338-.338-.886 0-1.224s.886-.338 1.224 0l3.522 3.521 3.523-3.521c.336-.338.886-.338 1.224 0s .337.886-.001 1.224l-4.135 4.134c-.168.169-.39.253-.611.253z"></path></g></svg>'},448:function(e,t){e.exports='<svg enable-background="new 0 0 10 6" viewBox="0 0 10 6" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="m5 .068c.222 0 .443.084.612.253l4.134 4.134c.338.338.338.886 0 1.224s-.886.338-1.224 0l-3.522-3.521-3.523 3.521c-.336.338-.886.338-1.224 0s-.337-.886.001-1.224l4.134-4.134c.168-.169.39-.253.612-.253z"></path></g></svg>'},449:function(e,t){e.exports='<svg enable-background="new 0 0 15 12" viewBox="0 0 15 12" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path class="coveo-active-shape-svg" d="m10.936 2.021 0 0c0 .549-.452.998-1.004.998h-1.004c-.552 0-1.004-.449-1.004-.998l0 0c0-.549.452-.998 1.004-.998h1.004c.552 0 1.004.449 1.004.998z"></path><path class="coveo-active-shape-svg" d="m12.943 5.015 0 0c0 .549-.452.998-1.004.998h-3.011c-.552 0-1.004-.449-1.004-.998l0 0c0-.549.452-.998 1.004-.998h3.011c.553 0 1.004.449 1.004.998z"></path><path class="coveo-active-shape-svg" d="m15 8.008 0 0c0 .549-.452.998-1.004.998h-5.068c-.552 0-1.004-.449-1.004-.998l0 0c0-.549.452-.998 1.004-.998h5.068c.552 0 1.004.449 1.004.998z"></path><path d="m6.521 2.683-2.403-2.391c-.188-.187-.444-.292-.71-.292s-.521.105-.71.292l-2.404 2.391c-.392.39-.392 1.021 0 1.411s1.027.39 1.419 0l .691-.687v7.594c0 .55.452.999 1.004.999s1.004-.449 1.004-.998v-7.594l.691.687c.392.39 1.027.39 1.419 0s .392-1.021-.001-1.412z"></path></g></svg>'},450:function(e,t){e.exports='<svg enable-background="new 0 0 11 11" viewBox="0 0 11 11" xmlns="http://www.w3.org/2000/svg"><g class="coveo-more-svg" fill="none"><path d="m10.083 4.583h-3.666v-3.666c0-.524-.393-.917-.917-.917s-.917.393-.917.917v3.667h-3.666c-.524-.001-.917.392-.917.916s.393.917.917.917h3.667v3.667c-.001.523.392.916.916.916s.917-.393.917-.917v-3.666h3.667c.523 0 .916-.393.916-.917-.001-.524-.394-.917-.917-.917z"></path></g><g class="coveo-exclusion-svg" fill="none"><path d="m9.233 7.989-2.489-2.489 2.489-2.489c.356-.356.356-.889 0-1.244-.356-.356-.889-.356-1.244 0l-2.489 2.489-2.489-2.489c-.356-.356-.889-.356-1.244 0-.356.356-.356.889 0 1.244l2.489 2.489-2.489 2.489c-.356.356-.356.889 0 1.244.356.356.889.356 1.244 0l2.489-2.489 2.489 2.489c.356.356.889.356 1.244 0 .356-.355.356-.889 0-1.244z"></path></g><g class="coveo-hook-svg" fill="none"><path d="m10.252 2.213c-.155-.142-.354-.211-.573-.213-.215.005-.414.091-.561.24l-4.873 4.932-2.39-2.19c-.154-.144-.385-.214-.57-.214-.214.004-.415.09-.563.24-.148.147-.227.343-.222.549.005.207.093.4.249.542l2.905 2.662c.168.154.388.239.618.239h.022.003c.237-.007.457-.101.618-.266l5.362-5.428c.148-.148.228-.344.223-.551s-.093-.399-.248-.542z"></path></g></svg>'},451:function(e,t){e.exports='<svg enable-background="new 0 0 15 12" viewBox="0 0 15 12" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="m6.521 7.906c-.392-.39-1.027-.39-1.419 0l-.69.686v-7.594c0-.549-.452-.998-1.004-.998s-1.004.449-1.004.998v7.594l-.69-.686c-.392-.39-1.027-.39-1.419 0-.392.39-.392 1.021 0 1.411l2.404 2.391c.188.187.443.292.709.292s.522-.105.71-.292l2.404-2.391c.392-.391.392-1.022-.001-1.411z"></path><path class="coveo-active-shape-svg" d="m9.932 11.001h-1.004c-.552 0-1.004-.449-1.004-.998l0 0c0-.549.452-.998 1.004-.998h1.004c.552 0 1.004.449 1.004.998l0 0c0 .549-.452.998-1.004.998z"></path><path class="coveo-active-shape-svg" d="m11.94 8.007h-3.012c-.552 0-1.004-.449-1.004-.998l0 0c0-.549.452-.998 1.004-.998h3.011c.552 0 1.004.449 1.004.998l0 0c0 .549-.451.998-1.003.998z"></path><path class="coveo-active-shape-svg" d="m13.996 5.014h-5.068c-.552 0-1.004-.449-1.004-.998l0 0c0-.549.452-.998 1.004-.998h5.068c.552 0 1.004.449 1.004.998l0 0c0 .548-.452.998-1.004.998z"></path></g></svg>'},452:function(e,t){e.exports='<svg enable-background="new 0 0 12 16" viewBox="0 0 12 16" xmlns="http://www.w3.org/2000/svg"><g class="coveo-dropdown-authenticate-svg" fill="none"><path d="m10 5h-8c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2m0 1.5c.3 0 .5.2.5.5v5c0 .3-.2.5-.5.5h-8c-.3 0-.5-.2-.5-.5v-5c0-.3.2-.5.5-.5z"></path><path d="m10 5h-1.6v-1.1c0-1.3-1.1-2.4-2.4-2.4s-2.4 1.1-2.4 2.4v1.1h-1.6v-1.1c0-2.1 1.8-3.9 4-3.9s4 1.8 4 3.9z"></path></g><g class="coveo-dropdown-authenticate-hover-svg" fill="none"><path class="coveo-active-shape-svg" d="m10 7h-8c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2m0 1.5c.3 0 .5.2.5.5v5c0 .3-.2.5-.5.5h-8c-.3 0-.5-.2-.5-.5v-5c0-.3.2-.5.5-.5z"></path><path d="m5.1.1c-1.8.4-3.1 2.1-3.1 4v2.9h1.6v-3.1c0-1.7 1.8-3 3.6-2.1.8.4 1.2 1.3 1.2 2.2v.6c0 .4.4.8.8.8s.8-.4.8-.8v-.7c0-2.4-2.3-4.4-4.9-3.8z"></path></g></svg>'},453:function(e,t){e.exports='<svg enable-background="new 0 0 14 14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" transform="matrix(0 1 -1 0 20 0)"><path d="m7.699 8.591 1.05 1.05c.49.49 1.05 0 1.05 0s .49-.56 0-1.05l-2.31-2.381c-.28-.28-.7-.28-.98 0l-2.309 2.451c-.49.49 0 .98 0 .98s.56.49 1.05 0l1.05-1.05v7.91c0 .42.35.7.7.7s.7-.35.7-.7z"></path><path class="coveo-active-shape-svg" d="m10.5 12.301h2.033l.065 6.301h-11.198v-6.301h2.1c.386 0 .7-.314.7-.7l0 0c0-.386-.314-.7-.7-.7h-2.806c-.383-.001-.694.31-.694.694v7.706c0 .385.318.699.694.699h12.607c.384 0 .699-.315.699-.699v-7.7c0-.386-.316-.699-.694-.699h-2.806c-.386 0-.7.314-.7.7l0 0c0 .385.314.699.7.699z"></path></g></svg>'},454:function(e,t){e.exports='<svg enable-background="new 0 0 15 12" viewBox="0 0 15 12" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="m9.224 11.999c-.198 0-.496-.103-.694-.308-.397-.411-.397-1.025 0-1.436l3.965-4.409-3.966-4.102c-.397-.411-.397-1.025 0-1.436s.991-.411 1.388 0l4.859 4.922c.298.308.298.718 0 1.025l-4.859 5.435c-.198.206-.496.309-.693.309"></path><path class="coveo-active-shape-svg" d="m4.958.411c-.397-.411-.991-.411-1.388 0s-.397 1.025 0 1.436l2.973 2.974h-5.552c-.594 0-.991.41-.991 1.025s.397 1.025.991 1.025h5.651l-3.074 3.384c-.397.411-.397 1.025 0 1.436.199.206.398.309.695.309.298 0 .495-.103.694-.308l4.859-5.333c.298-.308.298-.718 0-1.025z"></path></g></svg>'},455:function(e,t){e.exports='<svg enable-background="new 0 0 16 16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path class="coveo-active-shape-svg" d="m14 2v12h-11.999v-12zm1.306-2h-14.607c-.386 0-.699.318-.699.694v14.607c0 .384.315.699.699.699h14.602c.385 0 .699-.316.699-.694v-14.612c0-.383-.311-.694-.694-.694z"></path><path d="m10.969 9.055h-5.939c-.569 0-1.032-.448-1.032-1s .462-1 1.032-1h5.938c.57 0 1.032.448 1.032 1 .001.552-.46 1-1.031 1"></path></g></svg>'},456:function(e,t){e.exports='<svg enable-background="new 0 0 16 16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path class="coveo-active-shape-svg" d="m14 2v12h-12v-12zm1.306-2h-14.607c-.386 0-.699.318-.699.694v14.607c0 .384.315.699.699.699h14.602c.385 0 .699-.316.699-.694v-14.612c0-.383-.311-.694-.694-.694z"></path><path d="m10.969 7.055h-1.97v-1.968c0-.571-.448-1.032-1-1.032s-1 .462-1 1.032v1.969h-1.969c-.57 0-1.032.448-1.032 1s .463 1 1.032 1h1.97v1.969c0 .57.448 1.032 1 1.032s1-.463 1-1.032v-1.97h1.969c.571 0 1.032-.448 1.032-1 .001-.552-.462-1-1.032-1z"></path></g></svg>'},457:function(e,t){e.exports='<svg enable-background="new 0 0 22 22" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path class="coveo-active-shape-svg" d="m12.989 21.947h-3.978c-.752 0-1.388-.557-1.48-1.295l-.298-2.075c-.309-.154-.611-.33-.905-.526l-1.968.79c-.722.268-1.508-.028-1.858-.668l-1.977-3.419c-.366-.671-.207-1.47.365-1.922l1.669-1.306c-.013-.186-.019-.359-.019-.526s.006-.34.02-.526l-1.665-1.303c-.586-.462-.742-1.292-.365-1.932l1.985-3.434c.343-.633 1.136-.923 1.836-.65l1.98.796c.3-.2.6-.375.901-.527l.301-2.096c.089-.719.726-1.275 1.478-1.275h3.979c.753 0 1.39.557 1.479 1.296l.298 2.074c.31.154.611.33.905.526l1.968-.791c.721-.263 1.508.028 1.857.667l1.979 3.421c.365.671.207 1.47-.365 1.922l-1.669 1.305c.012.166.02.342.02.527s-.008.361-.02.526l1.665 1.302c.576.457.734 1.256.381 1.903l-2 3.463c-.35.636-1.146.922-1.84.649l-1.978-.794c-.301.199-.6.374-.902.526l-.3 2.095c-.088.72-.725 1.277-1.478 1.277m-3.539-2h3.1l.396-2.762.529-.217c.485-.2.964-.478 1.461-.851l.45-.337 2.585 1.038 1.554-2.688-2.198-1.718.071-.563c.035-.277.062-.555.062-.85s-.027-.572-.062-.85l-.071-.563 2.198-1.718-1.555-2.688-2.592 1.042-.452-.348c-.466-.358-.94-.633-1.451-.843l-.529-.217-.396-2.761h-3.1l-.396 2.762-.53.217c-.485.199-.962.477-1.46.85l-.451.337-2.584-1.038-1.554 2.688 2.196 1.718-.07.562c-.034.277-.061.564-.061.851s.027.573.062.852l.07.562-2.196 1.718 1.554 2.688 2.591-1.041.452.348c.465.356.939.632 1.452.843l.529.217z"></path><path d="m11 15c-2.206 0-4-1.794-4-4s1.794-4 4-4 4 1.794 4 4-1.794 4-4 4m0-6c-1.103 0-2 .897-2 2s .897 2 2 2 2-.897 2-2-.897-2-2-2"></path></g></svg>'},458:function(e,t){e.exports='<svg viewBox="0 0 18 14" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor" fill-rule="evenodd"><path class="coveo-active-shape-svg" d="m12.1 13.5c-.426 0-.771-.332-.771-.74 0-.409.346-.74.771-.74h1.862c1.374 0 2.49-1.136 2.49-2.534v-.193c0-1.144-.756-2.15-1.839-2.448l-.488-.134-.066-.484c-.132-.979-1.11-1.673-2.041-1.458l-.635.143-.253-.578c-.626-1.429-2.024-2.352-3.562-2.352-2.147 0-3.892 1.769-3.892 3.944 0 .082.002.164.007.246l.032.541-.529.192c-.986.359-1.65 1.319-1.65 2.388v.192c0 1.398 1.117 2.535 2.49 2.535h.782c.426 0 .771.332.771.74 0 .409-.346.74-.771.74h-.782c-2.224 0-4.03-1.802-4.03-4.02v-.192c0-1.496.842-2.861 2.143-3.549.097-2.908 2.496-5.243 5.432-5.243 1.968 0 3.767 1.061 4.726 2.747 1.501-.024 2.798.945 3.198 2.327 1.495.61 2.501 2.077 2.501 3.717v.193c0 2.215-1.808 4.02-4.03 4.02h-1.863"></path><path d="m9 5.234c-.098-.149-.3-.233-.511-.234-.212 0-.413.084-.561.232l-3.193 3.176c-.311.309-.312.812-.003 1.123.155.156.359.233.563.233.202 0 .406-.076.56-.231l1.822-1.813v5.485c0 .438.356.794.794.794.438 0 .794-.356.794-.794v-5.504l1.82 1.83c.309.311.812.312 1.122.002.31-.309.312-.812.002-1.123l-3.21-3.176"></path></g></svg>'},459:function(e,t){e.exports='<svg enable-background="new 0 0 16 16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path class="coveo-active-shape-svg" d="m8.01 0c-4.425 0-8.01 3.581-8.01 7.992 0 4.425 3.581 8.01 7.999 8.01l.003-.003c4.417 0 7.999-3.581 7.999-7.999 0-4.417-3.581-7.999-7.992-7.999m.002 1.5c3.58 0 6.493 2.916 6.493 6.5s-2.916 6.5-6.5 6.5h-.172c-3.506-.09-6.331-2.975-6.331-6.508 0-3.58 2.92-6.493 6.51-6.492"></path><path d="m11.04 10.27c-.192 0-.384-.073-.53-.22l-2.51-2.51-2.51 2.51c-.293.293-.768.293-1.061 0s-.293-.768 0-1.061l3.041-3.04c.141-.14.332-.219.53-.219l0 0c .199 0 .39.079.53.22l3.04 3.041c.293.293.293.768 0 1.061-.146.145-.337.218-.53.218z"></path></g></svg>'},460:function(e,t){e.exports='<svg enable-background="new 0 0 16 16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path class="coveo-active-shape-svg" d="m7.991 16.002c4.425 0 8.01-3.581 8.01-7.992 0-4.425-3.581-8.01-7.999-8.01l-.003.003c-4.417 0-7.999 3.581-7.999 7.999 0 4.417 3.581 7.999 7.992 7.999m-.002-1.5c-3.58 0-6.493-2.916-6.493-6.5s2.916-6.5 6.5-6.5h.172c3.506.09 6.331 2.975 6.331 6.508 0 3.58-2.92 6.493-6.51 6.493"></path><path d="m4.961 5.732c.192 0 .384.073.53.22l2.51 2.51 2.51-2.51c.293-.293.768-.293 1.061 0s .293.768 0 1.061l-3.041 3.04c-.141.14-.332.219-.53.219l0 0c-.199 0-.39-.079-.53-.22l-3.04-3.041c-.293-.293-.293-.768 0-1.061.146-.145.337-.218.53-.218z"></path></g></svg>'},461:function(e,t){e.exports='<svg enable-background="new 0 0 18 18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="m16.76 8.051c-.448 0-.855-.303-.969-.757-.78-3.117-3.573-5.294-6.791-5.294s-6.01 2.177-6.79 5.294c-.134.537-.679.861-1.213.727-.536-.134-.861-.677-.728-1.212 1.004-4.009 4.594-6.809 8.731-6.809 4.138 0 7.728 2.8 8.73 6.809.135.536-.191 1.079-.727 1.213-.081.02-.162.029-.243.029z"></path><path d="m9 18c-4.238 0-7.943-3.007-8.809-7.149-.113-.541.234-1.071.774-1.184.541-.112 1.071.232 1.184.773.674 3.222 3.555 5.56 6.851 5.56s6.178-2.338 6.852-5.56c.113-.539.634-.892 1.184-.773.54.112.887.643.773 1.184-.866 4.142-4.57 7.149-8.809 7.149z"></path></g></svg>'},462:function(e,t){e.exports='<svg enable-background="new 0 0 13 13" viewBox="0 0 13 13" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="m7.881 6.501 4.834-4.834c.38-.38.38-1.001 0-1.381s-1.001-.38-1.381 0l-4.834 4.834-4.834-4.835c-.38-.38-1.001-.38-1.381 0s-.38 1.001 0 1.381l4.834 4.834-4.834 4.834c-.38.38-.38 1.001 0 1.381s1.001.38 1.381 0l4.834-4.834 4.834 4.834c.38.38 1.001.38 1.381 0s .38-1.001 0-1.381z"></path></g></svg>'},463:function(e,t){e.exports='<svg enable-background="new 0 0 16 16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path class="coveo-more-background-svg" fill-opacity="0" d="m8.03.819c3.987 0 7.227 3.222 7.227 7.181s-3.239 7.181-7.227 7.181c-3.976 0-7.209-3.222-7.209-7.181s3.237-7.181 7.209-7.181"></path><path d="m0 8c0 4.416 3.572 8 7.991 8 4.425 0 8.009-3.581 8.009-8 0-4.416-3.581-8-8.009-8-4.416 0-7.991 3.581-7.991 8m8.031-6.4c3.553 0 6.441 2.872 6.441 6.4s-2.887 6.4-6.441 6.4c-3.544 0-6.425-2.872-6.425-6.4s2.885-6.4 6.425-6.4"></path><path d="m10.988 9.024c.551 0 1-.449 1-1s-.449-1-1-1-1 .449-1 1 .449 1 1 1"></path><path d="m7.991 9c .551 0 1-.449 1-1s-.449-1-1-1-1 .449-1 1 .449 1 1 1"></path><path d="m4.994 9c .551 0 1-.449 1-1s-.449-1-1-1-1 .449-1 1 .449 1 1 1"></path></g></svg>'},464:function(e,t){e.exports='<svg enable-background="new 0 0 18 18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path class="coveo-and-svg" d="m13.769 5.294h-1.063v-1.063c0-2.329-1.894-4.231-4.231-4.231h-4.244c-2.329 0-4.231 1.894-4.231 4.231v4.244c0 2.329 1.894 4.231 4.231 4.231h1.063v1.063c0 2.329 1.894 4.231 4.231 4.231h4.244c2.329 0 4.231-1.894 4.231-4.231v-4.244c0-2.329-1.894-4.231-4.231-4.231zm2.731 8.475c0 1.506-1.225 2.731-2.731 2.731h-4.244c-1.506 0-2.731-1.225-2.731-2.731v-2.563h-2.563c-1.506 0-2.731-1.225-2.731-2.731v-4.244c0-1.506 1.225-2.731 2.731-2.731h4.244c1.506 0 2.731 1.225 2.731 2.731v2.563h2.563c1.506 0 2.731 1.225 2.731 2.731z"></path><path class="coveo-or-svg" d="m11.206 6.794v1.909c0 1.38-1.123 2.503-2.503 2.503h-1.909v-1.909c0-1.38 1.123-2.503 2.503-2.503zm1.5-1.5h-3.409c-2.209 0-4.003 1.792-4.003 4.003v3.409h3.409c2.209 0 4.003-1.792 4.003-4.003z"></path></g></svg>'},465:function(e,t){e.exports='<svg enable-background="new 0 0 20 20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path class="coveo-magnifier-circle-svg" d="m8.368 16.736c-4.614 0-8.368-3.754-8.368-8.368s3.754-8.368 8.368-8.368 8.368 3.754 8.368 8.368-3.754 8.368-8.368 8.368m0-14.161c-3.195 0-5.793 2.599-5.793 5.793s2.599 5.793 5.793 5.793 5.793-2.599 5.793-5.793-2.599-5.793-5.793-5.793"></path><path d="m18.713 20c-.329 0-.659-.126-.91-.377l-4.552-4.551c-.503-.503-.503-1.318 0-1.82.503-.503 1.318-.503 1.82 0l4.552 4.551c.503.503.503 1.318 0 1.82-.252.251-.581.377-.91.377"></path></g></svg>'},466:function(e,t){e.exports='<svg enable-background="new 0 0 15 14" viewBox="0 0 15 14" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path class="coveo-active-shape-svg" d="m13.002 4.076 0 0c0 .536-.439.975-.975.975h-2.925c-.536 0-.975-.439-.975-.975l0 0c0-.536.439-.975.975-.975h2.925c.537 0 .975.438.975.975z"></path><path class="coveo-active-shape-svg" d="m13.002 9.925 0 0c0 .536-.439.975-.975.975h-2.925c-.536 0-.975-.439-.975-.975l0 0c0-.536.439-.975.975-.975h2.925c.537 0 .975.439.975.975z"></path><path class="coveo-active-shape-svg" d="m15 7 0 0c0 .536-.439.975-.975.975h-4.923c-.536 0-.974-.438-.974-.975l0 0c0-.536.439-.975.975-.975h4.923c.535.001.974.439.974.975z"></path><path d="m4.956 9.837-.671.671v-7.015l.671.671c.381.381.997.381 1.379 0 .381-.38.381-.997 0-1.379l-2.335-2.336c-.183-.184-.431-.286-.69-.286s-.506.102-.689.286l-2.335 2.336c-.381.381-.381.997 0 1.379s.997.381 1.379 0l .671-.671v7.015l-.671-.671c-.381-.381-.997-.381-1.379 0-.381.38-.381.997 0 1.379l2.335 2.336c.182.183.431.286.689.286s.506-.103.69-.287l2.335-2.336c.381-.381.381-.997 0-1.379-.382-.381-.998-.381-1.379.001z"></path></g></svg>'},468:function(e,t){},469:function(e,t){},470:function(e,t){},471:function(e,t){},472:function(e,t){},473:function(e,t){},474:function(e,t){},477:function(e,t,o){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=o(400),s=o(57),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.init=function(e,o,i){n.ResponsiveFacetColumn.init(t,e,o,i,s.Facet.ID)},t}(n.ResponsiveFacetColumn);t.ResponsiveFacets=a},57:function(e,t,o){"use strict";(function(e){var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=o(8),s=o(91),a=o(9),r=o(19),c=o(10),l=o(265),u=o(403),h=o(393),d=o(394),p=o(405),f=o(398),v=o(42),m=o(11),g=o(7),y=o(3),S=o(12),b=o(5),C=o(401),V=o(402),x=o(90),w=o(404),E=o(28),$=o(14),F=o(16),O=o(33),A=o(406),R=o(407),I=o(396),D=o(241),N=o(2),T=o(43),k=o(477),B=o(22),M=o(264),P=o(59),L=o(1),_=o(4);o(470),o(472);var U=o(21),Q=o(27),H=function(t){function o(e,i,n,r){void 0===r&&(r=o.ID);var c=t.call(this,e,r,n)||this;return c.element=e,c.options=i,c.keepDisplayedValuesNextTime=!1,c.values=new s.FacetValues,c.currentPage=0,c.firstQuery=!0,c.canFetchMore=!0,c.showingWaitAnimation=!1,c.listenToQueryStateChange=!0,c.options=a.ComponentOptions.initComponentOptions(e,o,i),null!=c.options.valueCaption&&(c.options.availableSorts=L.filter(c.options.availableSorts,function(e){return!/^alpha.*$/.test(e)}),c.logger.warn("Because the "+c.options.field+" facet is using value captions, alphabetical sorts are disabled.")),k.ResponsiveFacets.init(c.root,c,c.options),c.omniboxZIndex=o.omniboxIndex,o.omniboxIndex--,c.checkForComputedFieldAndSort(),c.checkForValueCaptionType(),c.checkForCustomSort(),c.initFacetQueryController(),c.initQueryEvents(),c.initQueryStateEvents(),c.initComponentStateEvents(),c.initOmniboxEvents(),c.initBreadCrumbEvents(),c.initSearchAlertEvents(),c.updateNumberOfValues(),c.bind.oneRootElement(m.QueryEvents.querySuccess,function(){c.firstQuery=!1}),c}return i(o,t),o.prototype.createDom=function(){var e=this;if(this.initBottomAndTopSpacer(),this.buildFacetContent(),this.updateAppearanceDependingOnState(),this.facetSettings&&this.options.enableSettingsFacetState){var t=L.once(function(){e.facetSettings.loadSavedState.apply(e.facetSettings)});this.bind.onRootElement(m.QueryEvents.newQuery,t)}},o.prototype.selectValue=function(e){g.Assert.exists(e),this.ensureDom(),this.logger.info("Selecting facet value",this.facetValuesList.select(e)),this.facetValueHasChanged()},o.prototype.selectMultipleValues=function(e){var t=this;g.Assert.exists(e),this.ensureDom(),L.each(e,function(e){t.logger.info("Selecting facet value",t.facetValuesList.select(e))}),this.facetValueHasChanged()},o.prototype.deselectValue=function(e){g.Assert.exists(e),this.ensureDom(),this.logger.info("Deselecting facet value",this.facetValuesList.unselect(e)),this.facetValueHasChanged()},o.prototype.deselectMultipleValues=function(e){var t=this;g.Assert.exists(e),this.ensureDom(),L.each(e,function(e){t.logger.info("Deselecting facet value",t.facetValuesList.unselect(e))}),this.facetValueHasChanged()},o.prototype.excludeValue=function(e){g.Assert.exists(e),this.ensureDom(),this.logger.info("Excluding facet value",this.facetValuesList.exclude(e)),this.facetValueHasChanged()},o.prototype.excludeMultipleValues=function(e){var t=this;g.Assert.exists(e),this.ensureDom(),L.each(e,function(e){t.logger.info("Excluding facet value",t.facetValuesList.exclude(e))}),this.facetValueHasChanged()},o.prototype.unexcludeValue=function(e){g.Assert.exists(e),this.ensureDom(),this.logger.info("Unexcluding facet value",this.facetValuesList.unExclude(e)),this.facetValueHasChanged()},o.prototype.unexcludeMultipleValues=function(e){var t=this;g.Assert.exists(e),this.ensureDom(),L.each(e,function(e){t.logger.info("Unexcluding facet value",t.facetValuesList.unExclude(e))}),this.facetValueHasChanged()},o.prototype.toggleSelectValue=function(e){g.Assert.exists(e),this.ensureDom(),this.logger.info("Toggle select facet value",this.facetValuesList.toggleSelect(e)),this.facetValueHasChanged()},o.prototype.toggleExcludeValue=function(e){g.Assert.exists(e),this.ensureDom(),this.logger.info("Toggle exclude facet value",this.facetValuesList.toggleExclude(e)),this.facetValueHasChanged()},o.prototype.getDisplayedValues=function(){return L.pluck(this.getDisplayedFacetValues(),"value")},o.prototype.getDisplayedFacetValues=function(){this.ensureDom();var e=this.facetValuesList.getAllCurrentlyDisplayed();return L.map(e,function(e){return e.facetValue})},o.prototype.getSelectedValues=function(){return this.ensureDom(),L.map(this.values.getSelected(),function(e){return e.value})},o.prototype.getExcludedValues=function(){return this.ensureDom(),L.map(this.values.getExcluded(),function(e){return e.value})},o.prototype.reset=function(){this.ensureDom(),this.values.reset(),this.rebuildValueElements(),this.updateAppearanceDependingOnState(),this.updateQueryStateModel()},o.prototype.switchToAnd=function(){this.ensureDom(),this.logger.info("Switching to AND"),this.facetHeader.switchToAnd()},o.prototype.switchToOr=function(){this.ensureDom(),this.logger.info("Switching to OR"),this.facetHeader.switchToOr()},o.prototype.getEndpoint=function(){return this.queryController.getEndpoint()},o.prototype.updateSort=function(e){this.ensureDom(),this.options.sortCriteria!=e&&(this.options.sortCriteria=e,this.triggerNewQuery())},o.prototype.unfadeInactiveValuesInMainList=function(){y.$$(this.element).removeClass("coveo-facet-fade")},o.prototype.fadeInactiveValuesInMainList=function(e){y.$$(this.element).addClass("coveo-facet-fade")},o.prototype.showWaitingAnimation=function(){this.ensureDom(),this.showingWaitAnimation||(y.$$(this.headerElement).find(".coveo-facet-header-wait-animation").style.visibility="visible",this.showingWaitAnimation=!0)},o.prototype.hideWaitingAnimation=function(){this.ensureDom(),this.showingWaitAnimation&&(y.$$(this.headerElement).find(".coveo-facet-header-wait-animation").style.visibility="hidden",this.showingWaitAnimation=!1)},o.prototype.processFacetSearchAllResultsSelected=function(e){var t=this,o=[];L.each(e,function(e){t.ensureFacetValueIsInList(e),o.push(e.value)});var i=this.values.getSelected().concat(this.values.getExcluded());this.numberOfValues=i.length+L.difference(i,e).length,this.numberOfValues=Math.max(this.numberOfValues,this.options.numberOfValues),this.currentPage=Math.floor((this.numberOfValues-this.options.numberOfValues)/this.options.pageSize),this.updateQueryStateModel(),this.triggerNewQuery(function(){return t.usageAnalytics.logSearchEvent(S.analyticsActionCauseList.facetSelectAll,{facetId:t.options.id,facetTitle:t.options.title})})},o.prototype.pinFacetPosition=function(){this.options.preservePosition&&(this.pinnedViewportPosition=this.element.getBoundingClientRect().top)},o.prototype.getValueCaption=function(e){g.Assert.exists(e);var t=e.lookupValue||e.value,o=t;return o=v.FacetUtils.tryToGetTranslatedCaption(this.options.field,t),b.Utils.exists(this.options.valueCaption)&&("object"==typeof this.options.valueCaption&&(o=this.options.valueCaption[t]||o),"function"==typeof this.options.valueCaption&&(this.values.get(t),o=this.options.valueCaption.call(this,this.facetValuesList.get(t).facetValue))),o},o.prototype.showMore=function(){this.currentPage++,this.updateNumberOfValues(),this.nbAvailableValues>=this.numberOfValues||!this.canFetchMore?this.rebuildValueElements():this.triggerMoreQuery()},o.prototype.showLess=function(){y.$$(this.lessElement).removeClass("coveo-active"),this.currentPage=0,this.updateNumberOfValues(),y.$$(this.moreElement).addClass("coveo-active"),this.values.sortValuesDependingOnStatus(this.numberOfValues),this.rebuildValueElements()},o.prototype.collapse=function(){this.ensureDom(),this.facetHeader&&this.facetHeader.collapseFacet()},o.prototype.expand=function(){this.ensureDom(),this.facetHeader&&this.facetHeader.expandFacet()},o.prototype.triggerNewQuery=function(e){e?this.queryController.executeQuery({beforeExecuteQuery:e}):this.queryController.executeQuery({ignoreWarningSearchEvent:!0}),this.showWaitingAnimation()},o.prototype.handleDeferredQuerySuccess=function(e){g.Assert.exists(e),this.unfadeInactiveValuesInMainList(),this.hideWaitingAnimation(),this.updateVisibilityBasedOnDependsOn();var t=e.results.groupByResults[this.facetQueryController.lastGroupByRequestIndex];this.facetQueryController.lastGroupByResult=t,t||(this.keepDisplayedValuesNextTime=!1),this.processNewGroupByResults(t)},o.prototype.handlePopulateBreadcrumb=function(e){if(g.Assert.exists(e),this.values.hasSelectedOrExcludedValues()){var t=new V.BreadcrumbValueList(this,this.values.getSelected().concat(this.values.getExcluded()),C.BreadcrumbValueElement).build();e.breadcrumbs.push({element:t})}},o.prototype.handlePopulateSearchAlerts=function(e){if(this.values.hasSelectedOrExcludedValues()){var t=this.values.getExcluded(),o=this.values.getSelected();L.isEmpty(t)||e.text.push({value:new V.BreadcrumbValueList(this,t,C.BreadcrumbValueElement).buildAsString(),lineThrough:!0}),L.isEmpty(o)||e.text.push({value:new V.BreadcrumbValueList(this,o,C.BreadcrumbValueElement).buildAsString(),lineThrough:!1})}},o.prototype.initFacetQueryController=function(){this.facetQueryController=new l.FacetQueryController(this)},o.prototype.initFacetValuesList=function(){this.facetValuesList=new p.FacetValuesList(this,x.FacetValueElement),this.element.appendChild(this.facetValuesList.build())},o.prototype.initFacetSearch=function(){this.facetSearch=new u.FacetSearch(this,w.FacetSearchValuesList,this.root),this.element.appendChild(this.facetSearch.build())},o.prototype.facetValueHasChanged=function(){var e=this;this.updateQueryStateModel(),this.rebuildValueElements(),E.Defer.defer(function(){e.updateAppearanceDependingOnState()})},o.prototype.updateAppearanceDependingOnState=function(){y.$$(this.element).toggleClass("coveo-active",this.values.hasSelectedOrExcludedValues()),y.$$(this.element).toggleClass("coveo-facet-empty",!this.isAnyValueCurrentlyDisplayed()),y.$$(this.facetHeader.eraserElement).toggleClass("coveo-facet-header-eraser-visible",this.values.hasSelectedOrExcludedValues())},o.prototype.initQueryEvents=function(){var e=this;this.bind.onRootElement(m.QueryEvents.duringQuery,function(){return e.handleDuringQuery()}),this.bind.onRootElement(m.QueryEvents.buildingQuery,function(t){return e.handleBuildingQuery(t)}),this.bind.onRootElement(m.QueryEvents.doneBuildingQuery,function(t){return e.handleDoneBuildingQuery(t)}),this.bind.onRootElement(m.QueryEvents.deferredQuerySuccess,function(t){return e.handleDeferredQuerySuccess(t)})},o.prototype.initQueryStateEvents=function(){var e=this;this.includedAttributeId=$.QueryStateModel.getFacetId(this.options.id),this.excludedAttributeId=$.QueryStateModel.getFacetId(this.options.id,!1),this.operatorAttributeId=$.QueryStateModel.getFacetOperator(this.options.id),this.lookupValueAttributeId=$.QueryStateModel.getFacetLookupValue(this.options.id),this.queryStateModel.registerNewAttribute(this.includedAttributeId,[]),this.queryStateModel.registerNewAttribute(this.excludedAttributeId,[]),this.queryStateModel.registerNewAttribute(this.operatorAttributeId,""),this.queryStateModel.registerNewAttribute(this.lookupValueAttributeId,{}),this.bind.onQueryState(F.MODEL_EVENTS.CHANGE,void 0,function(t){return e.handleQueryStateChanged(t)})},o.prototype.initComponentStateEvents=function(){this.componentStateId=$.QueryStateModel.getFacetId(this.options.id),this.componentStateModel.registerComponent(this.componentStateId,this)},o.prototype.initOmniboxEvents=function(){var e=this;this.options.includeInOmnibox&&this.bind.onRootElement(O.OmniboxEvents.populateOmnibox,function(t){return e.handlePopulateOmnibox(t)})},o.prototype.initBreadCrumbEvents=function(){var e=this;this.options.includeInBreadcrumb&&(this.bind.onRootElement(T.BreadcrumbEvents.populateBreadcrumb,function(t){return e.handlePopulateBreadcrumb(t)}),this.bind.onRootElement(T.BreadcrumbEvents.clearBreadcrumb,function(t){return e.handleClearBreadcrumb()}))},o.prototype.initSearchAlertEvents=function(){var e=this;this.bind.onRootElement(P.SearchAlertsEvents.searchAlertsPopulateMessage,function(t){return e.handlePopulateSearchAlerts(t)})},o.prototype.handleOmniboxWithStaticValue=function(e){var t=this,o=new RegExp("^"+e.completeQueryExpression.regex.source,"i"),i=L.first(L.filter(this.getDisplayedValues(),function(e){var i=t.getValueCaption(t.facetValuesList.get(e).facetValue);return o.test(i)}),this.options.numberOfValuesInOmnibox),n=L.map(i,function(e){return t.facetValuesList.get(e).facetValue}),s=new R.OmniboxValuesList(this,n,e,A.OmniboxValueElement).build();e.rows.push({element:s,zIndex:this.omniboxZIndex})},o.prototype.processNewGroupByResults=function(e){this.logger.trace("Displaying group by results",e),void 0!=e&&void 0!=e.values&&(this.nbAvailableValues=e.values.length);var t=new s.FacetValues(e);this.updateValues(t),this.canFetchMore=this.numberOfValues<this.nbAvailableValues,this.values.hasSelectedOrExcludedValues()&&!this.options.useAnd&&this.options.isMultiValueField?this.triggerUpdateDeltaQuery(L.filter(this.values.getAll(),function(e){return!e.selected&&!e.excluded})):this.values.getSelected().length>0&&!this.options.useAnd&&this.values.updateDeltaWithFilteredFacetValues(new s.FacetValues),this.values.hasSelectedOrExcludedValues()&&!this.options.useAnd&&this.options.isMultiValueField||(this.rebuildValueElements(),this.updateAppearanceDependingOnState(),this.ensurePinnedFacetHasntMoved()),this.keepDisplayedValuesNextTime=!1},o.prototype.updateQueryStateModel=function(){this.listenToQueryStateChange=!1,this.updateExcludedQueryStateModel(),this.updateIncludedQueryStateModel(),this.facetHeader.updateOperatorQueryStateModel(),this.updateLookupValueQueryStateModel(),this.listenToQueryStateChange=!0},o.prototype.rebuildValueElements=function(){this.updateNumberOfValues(),this.facetValuesList.rebuild(this.numberOfValues),this.shouldRenderMoreLess()?(this.updateMoreLess(),this.shouldRenderFacetSearch()&&this.updateSearchElement(this.nbAvailableValues>this.numberOfValues)):this.shouldRenderFacetSearch()&&this.updateSearchElement()},o.prototype.updateSearchElement=function(e){var t=this;if(void 0===e&&(e=!0),e){var o=new I.ValueElementRenderer(this,s.FacetValue.create("Search")),i=o.build().withNo([o.excludeIcon,o.icon]);y.$$(i.listItem).addClass("coveo-facet-search-button"),i.stylishCheckbox.removeAttribute("tabindex"),r.DeviceUtils.isMobileDevice()&&y.$$(i.label).on("click",function(e){i.checkbox.getAttribute("checked")?i.checkbox.removeAttribute("checked"):i.checkbox.setAttribute("checked","checked"),y.$$(i.checkbox).trigger("change"),e.stopPropagation(),e.preventDefault()}),y.$$(i.checkbox).on("change",function(){y.$$(t.element).addClass("coveo-facet-searching"),t.facetSearch.focus()}),this.facetValuesList.valueContainer.appendChild(i.listItem)}},o.prototype.updateMoreLess=function(e,t){void 0===e&&(e=this.getMinimumNumberOfValuesToDisplay()<this.numberOfValues),void 0===t&&(t=this.nbAvailableValues>this.numberOfValues),e?y.$$(this.lessElement).addClass("coveo-active"):y.$$(this.lessElement).removeClass("coveo-active"),t?y.$$(this.moreElement).addClass("coveo-active"):y.$$(this.moreElement).removeClass("coveo-active"),e||t?y.$$(this.footerElement).removeClass("coveo-facet-empty"):y.$$(this.footerElement).addClass("coveo-facet-empty")},o.prototype.handleClickMore=function(){this.showMore()},o.prototype.handleClickLess=function(){this.showLess()},o.prototype.checkForComputedFieldAndSort=function(){-1!=this.options.sortCriteria.toLowerCase().indexOf("computedfield")&&b.Utils.isNullOrUndefined(this.options.computedField)&&this.logger.warn("Sort criteria is specified as ComputedField, but the facet uses no computed field. Facet will always be empty !",this)},o.prototype.checkForValueCaptionType=function(){this.options.valueCaption&&"function"==typeof this.options.valueCaption&&(this.options.enableFacetSearch=!1,this.options.includeInOmnibox=!1,this.logger.warn("Using a function as valueCaption is now deprecated. Use a json key value pair instead. Facet search and omnibox has been disabled for this facet",this))},o.prototype.checkForCustomSort=function(){void 0==this.options.customSort||L.contains(this.options.availableSorts,"custom")||this.options.availableSorts.unshift("custom"),"custom"==this.options.availableSorts[0]&&(this.options.sortCriteria="nosort")},o.prototype.initBottomAndTopSpacer=function(){var e=this,t=y.$$(this.options.paddingContainer).find(".coveo-bottomSpace"),o=y.$$(this.options.paddingContainer).find(".coveo-topSpace");this.options.preservePosition&&(y.$$(this.options.paddingContainer).on("mouseleave",function(){return e.unpinFacetPosition()}),this.pinnedTopSpace=o,this.pinnedBottomSpace=t,this.pinnedTopSpace||(this.pinnedTopSpace=document.createElement("div"),y.$$(this.pinnedTopSpace).addClass("coveo-topSpace"),y.$$(this.pinnedTopSpace).insertBefore(this.options.paddingContainer.firstChild)),this.pinnedBottomSpace||(this.pinnedBottomSpace=document.createElement("div"),y.$$(this.pinnedBottomSpace).addClass("coveo-bottomSpace"),this.options.paddingContainer.appendChild(this.pinnedBottomSpace)))},o.prototype.updateIncludedQueryStateModel=function(){var e={included:this.getSelectedValues(),title:this.includedAttributeId};this.queryStateModel.set(this.includedAttributeId,e.included)},o.prototype.updateExcludedQueryStateModel=function(){var e={title:this.excludedAttributeId,excluded:this.getExcludedValues()};this.queryStateModel.set(this.excludedAttributeId,e.excluded)},o.prototype.updateLookupValueQueryStateModel=function(){if(this.options.lookupField){var e={};L.each(this.values.getSelected().concat(this.values.getExcluded()),function(t){e[t.value]=t.lookupValue}),this.queryStateModel.set(this.lookupValueAttributeId,e)}},o.prototype.handleQueryStateChangedOperator=function(e){"and"==e?this.switchToAnd():"or"==e&&this.switchToOr()},o.prototype.handleQueryStateChangedIncluded=function(e){var t=L.difference(this.getSelectedValues(),e);b.Utils.isNonEmptyArray(t)&&this.deselectMultipleValues(t),b.Utils.arrayEqual(this.getSelectedValues(),e,!1)||this.selectMultipleValues(e)},o.prototype.handleQueryStateChangedExcluded=function(e){var t=L.difference(this.getExcludedValues(),e);b.Utils.isNonEmptyArray(t)&&this.unexcludeMultipleValues(t),b.Utils.arrayEqual(this.getExcludedValues(),e,!1)||this.excludeMultipleValues(e)},o.prototype.handleLookupvalueChanged=function(e){var t=this;L.each(e,function(e,o){t.facetValuesList.get(decodeURIComponent(o)).facetValue.lookupValue=decodeURIComponent(e)})},o.prototype.handleQueryStateChanged=function(e){g.Assert.exists(e),this.ensureDom();var t=e.attributes,o=t[this.includedAttributeId],i=t[this.excludedAttributeId],n=t[this.operatorAttributeId],s=t[this.lookupValueAttributeId];this.listenToQueryStateChange&&(b.Utils.isNullOrEmptyString(n)||this.handleQueryStateChangedOperator(n),b.Utils.isNullOrUndefined(o)||this.handleQueryStateChangedIncluded(o),b.Utils.isNullOrUndefined(i)||this.handleQueryStateChangedExcluded(i),b.Utils.isNullOrUndefined(s)||this.handleLookupvalueChanged(s))},o.prototype.handlePopulateOmnibox=function(e){g.Assert.exists(e),g.Assert.exists(e.completeQueryExpression),this.queryController.ensureCreatedQueryBuilder(),this.canFetchMore?this.handleOmniboxWithSearchInFacet(e):this.handleOmniboxWithStaticValue(e)},o.prototype.handleOmniboxWithSearchInFacet=function(t){var o=this,i=new RegExp("^"+t.completeQueryExpression.regex.source,"i"),n=new e(function(e,n){var a=new D.FacetSearchParameters(o);a.setValueToSearch(t.completeQueryExpression.word),a.nbResults=o.options.numberOfValuesInOmnibox,o.facetQueryController.search(a).then(function(n){var a=L.map(L.filter(n,function(e){return i.test(e.lookupValue)}),function(e){return o.values.get(e.lookupValue)||s.FacetValue.create(e)}),r=new R.OmniboxValuesList(o,a,t,A.OmniboxValueElement).build();e({element:r,zIndex:o.omniboxZIndex})}).catch(function(){e({element:void 0})})});t.rows.push({deferred:n})},o.prototype.handleDuringQuery=function(){this.ensureDom(),this.keepDisplayedValuesNextTime||this.fadeInactiveValuesInMainList(this.options.facetSearchDelay)},o.prototype.handleBuildingQuery=function(e){if(g.Assert.exists(e),g.Assert.exists(e.queryBuilder),this.facetQueryController.prepareForNewQuery(),this.values.hasSelectedOrExcludedValues()){var t=this.facetQueryController.computeOurFilterExpression();this.logger.trace("Putting filter in query",t),e.queryBuilder.advancedExpression.add(t)}},o.prototype.handleDoneBuildingQuery=function(e){g.Assert.exists(e),g.Assert.exists(e.queryBuilder);var t=e.queryBuilder;this.facetQueryController.putGroupByIntoQueryBuilder(t)},o.prototype.handleClearBreadcrumb=function(){this.reset()},o.prototype.updateValues=function(e){g.Assert.exists(e),this.keepDisplayedValuesNextTime?this.values.updateCountsFromNewValues(e):(e.importActiveValuesFromOtherList(this.values),e.sortValuesDependingOnStatus(this.numberOfValues),this.values=e),this.updateNumberOfValues()},o.prototype.ensureFacetValueIsInList=function(e){g.Assert.exists(e),this.values.contains(e.value)||this.values.add(e)},o.prototype.isAnyValueCurrentlyDisplayed=function(){return!this.values.isEmpty()},o.prototype.buildFacetContent=function(){this.headerElement=this.buildHeader(),this.element.appendChild(this.headerElement),this.initFacetValuesList(),this.shouldRenderFacetSearch()&&this.initFacetSearch(),this.shouldRenderMoreLess()&&(this.moreElement=this.buildMore(),this.lessElement=this.buildLess()),this.footerElement=this.buildFooter(),this.element.appendChild(this.footerElement),this.lessElement&&this.moreElement&&(this.footerElement.appendChild(this.lessElement),this.footerElement.appendChild(this.moreElement))},o.prototype.buildHeader=function(){var e=this.options.headerIcon;this.options.headerIcon==this.options.field&&(e=void 0),this.facetHeader=new f.FacetHeader({facetElement:this.element,title:this.options.title,icon:e,field:this.options.field,enableClearElement:!0,enableCollapseElement:this.options.enableCollapse,facet:this,settingsKlass:this.options.enableSettings?h.FacetSettings:void 0,sortKlass:d.FacetSort,availableSorts:this.options.availableSorts});var t=this.facetHeader.build();return this.facetSettings=this.facetHeader.settings,this.facetSort=this.facetHeader.sort,t},o.prototype.unpinFacetPosition=function(){this.shouldFacetUnpin()&&this.options.preservePosition&&(y.$$(this.pinnedTopSpace).addClass("coveo-with-animation"),y.$$(this.pinnedBottomSpace).addClass("coveo-with-animation"),this.pinnedTopSpace.style.height="0px",this.pinnedBottomSpace.style.height="0px"),this.unpinnedViewportPosition=void 0,this.pinnedViewportPosition=void 0},o.prototype.isFacetPinned=function(){return b.Utils.exists(this.pinnedViewportPosition)},o.prototype.shouldFacetUnpin=function(){return b.Utils.exists(this.unpinnedViewportPosition)},o.prototype.ensurePinnedFacetHasntMoved=function(){if(this.isFacetPinned()){g.Assert.exists(this.pinnedViewportPosition),y.$$(this.pinnedTopSpace).removeClass("coveo-with-animation"),y.$$(this.pinnedBottomSpace).removeClass("coveo-with-animation"),this.pinnedTopSpace.style.height="0px",this.pinnedBottomSpace.style.height="0px";var e=this.options.scrollContainer==document.body?window:this.options.scrollContainer,t=this.element.getBoundingClientRect().top,o=t-this.pinnedViewportPosition;!function(){e instanceof Window?window.scrollTo(0,window.scrollY+o):e.scrollTop=e.scrollTop+o}(),t=this.element.getBoundingClientRect().top,o=t-this.pinnedViewportPosition,o<0&&(this.pinnedTopSpace.style.height=-1*o+"px"),this.unpinnedViewportPosition=this.pinnedViewportPosition,this.pinnedViewportPosition=null}},o.prototype.buildFooter=function(){return y.$$("div",{className:"coveo-facet-footer"}).el},o.prototype.buildMore=function(){var e,t=this,o=y.$$("span",{className:"coveo-facet-more-icon"},U.SVGIcons.arrowDown).el;Q.SVGDom.addClassToSVGInContainer(o,"coveo-facet-more-icon-svg"),e=y.$$("div",{className:"coveo-facet-more",tabindex:0},o).el;var i=function(){return t.handleClickMore()};return y.$$(e).on("click",i),y.$$(e).on("keyup",B.KeyboardUtils.keypressAction(B.KEYBOARD.ENTER,i)),e},o.prototype.buildLess=function(){var e,t=this,o=y.$$("span",{className:"coveo-facet-less-icon"},U.SVGIcons.arrowUp).el;Q.SVGDom.addClassToSVGInContainer(o,"coveo-facet-less-icon-svg"),e=y.$$("div",{className:"coveo-facet-less",tabIndex:0},o).el;var i=function(){return t.handleClickLess()};return y.$$(e).on("click",i),y.$$(e).on("keyup",B.KeyboardUtils.keypressAction(B.KEYBOARD.ENTER,i)),e},o.prototype.triggerMoreQuery=function(){var e=this;this.logger.info("Triggering new facet more query"),this.showWaitingAnimation(),this.facetQueryController.fetchMore(this.numberOfValues+1).then(function(t){var o=new s.FacetValues(t.groupByResults[0]);o.importActiveValuesFromOtherList(e.values),o.sortValuesDependingOnStatus(e.numberOfValues),e.values=o,e.nbAvailableValues=e.values.size(),e.updateNumberOfValues(),e.canFetchMore=e.numberOfValues<e.nbAvailableValues,e.values.hasSelectedOrExcludedValues()&&!e.options.useAnd&&e.options.isMultiValueField?e.triggerUpdateDeltaQuery(L.filter(e.values.getAll(),function(e){return!e.selected&&!e.excluded})):(e.values.hasSelectedOrExcludedValues()&&!e.options.useAnd?(e.values.updateDeltaWithFilteredFacetValues(new s.FacetValues),e.hideWaitingAnimation()):e.hideWaitingAnimation(),e.rebuildValueElements())}).catch(function(){return e.hideWaitingAnimation()})},o.prototype.triggerUpdateDeltaQuery=function(e){var t=this;this.showWaitingAnimation(),this.facetQueryController.searchInFacetToUpdateDelta(e).then(function(e){var o=new s.FacetValues;L.each(e.groupByResults,function(e){L.each(e.values,function(e){o.contains(e.value)||o.add(s.FacetValue.createFromGroupByValue(e))})}),t.values.updateDeltaWithFilteredFacetValues(o),t.rebuildValueElements(),t.hideWaitingAnimation()})},o.prototype.updateNumberOfValues=function(){this.currentPage<=0?(this.currentPage=0,this.numberOfValues=0):this.numberOfValues=this.options.numberOfValues+this.currentPage*this.options.pageSize,this.numberOfValues=Math.max(this.numberOfValues,this.getMinimumNumberOfValuesToDisplay())},o.prototype.getMinimumNumberOfValuesToDisplay=function(){var e=this.values.getExcluded().length+this.values.getSelected().length;if(null!=this.options.customSort&&null!=this.facetSort&&this.options.customSort.length>0){var t=-1;new M.FacetValuesOrder(this,this.facetSort).reorderValues(this.values.getAll()).forEach(function(e,o){e.selected&&(t=o)}),e=t+1}return Math.max(e,this.options.numberOfValues)},o.prototype.updateVisibilityBasedOnDependsOn=function(){b.Utils.isNonEmptyString(this.options.dependsOn)&&y.$$(this.element).toggleClass("coveo-facet-dependent",!this.doesParentFacetHasSelectedValue()&&!this.values.hasSelectedOrExcludedValues())},o.prototype.doesParentFacetHasSelectedValue=function(){var e=$.QueryStateModel.getFacetId(this.options.dependsOn),t=this.queryStateModel.get(e);return null!=t&&0!=t.length},o.prototype.shouldRenderFacetSearch=function(){return this.options.enableFacetSearch},o.prototype.shouldRenderMoreLess=function(){return this.options.enableMoreLess},o.prototype.debugInfo=function(){var e={};return e[this.constructor.ID]={component:this,groupByRequest:this.facetQueryController.lastGroupByRequest,groupByResult:this.facetQueryController.lastGroupByResult},e},o}(n.Component);H.ID="Facet",H.omniboxIndex=50,H.doExport=function(){_.exportGlobally({Facet:H,FacetHeader:f.FacetHeader,FacetSearchValuesList:w.FacetSearchValuesList,FacetSettings:h.FacetSettings,FacetSort:d.FacetSort,FacetUtils:v.FacetUtils,FacetValueElement:x.FacetValueElement,FacetValue:s.FacetValue})},H.options={title:a.ComponentOptions.buildLocalizedStringOption({defaultValue:c.l("NoTitle"),section:"Identification",priority:10}),field:a.ComponentOptions.buildFieldOption({required:!0,groupByField:!0,section:"Identification"}),headerIcon:a.ComponentOptions.buildIconOption({deprecated:"This option is exposed for legacy reasons, and the recommendation is to not use this option."}),id:a.ComponentOptions.buildStringOption({postProcessing:function(e,t){return e||t.field}}),isMultiValueField:a.ComponentOptions.buildBooleanOption({defaultValue:!1}),lookupField:a.ComponentOptions.buildFieldOption({deprecated:"This option is exposed for legacy reasons, and the recommendation is to not use this option."}),enableSettings:a.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"SettingsMenu",priority:9}),enableSettingsFacetState:a.ComponentOptions.buildBooleanOption({defaultValue:!1,depend:"enableSettings"}),availableSorts:a.ComponentOptions.buildListOption({defaultValue:["occurrences","score","alphaAscending","alphaDescending"],values:["Occurrences","Score","AlphaAscending","AlphaDescending","ComputedFieldAscending","ComputedFieldDescending","ChiSquare","NoSort"],depend:"enableSettings"}),sortCriteria:a.ComponentOptions.buildStringOption({postProcessing:function(e,t){return e||(t.availableSorts.length>0?t.availableSorts[0]:"occurrences")}}),customSort:a.ComponentOptions.buildListOption({section:"Identification"}),numberOfValues:a.ComponentOptions.buildNumberOption({defaultValue:5,min:0,section:"Identification"}),injectionDepth:a.ComponentOptions.buildNumberOption({defaultValue:1e3,min:0}),showIcon:a.ComponentOptions.buildBooleanOption({defaultValue:!1,deprecated:"This option is exposed for legacy reasons, and the recommendation is to not use this option."}),useAnd:a.ComponentOptions.buildBooleanOption({defaultValue:!1}),enableTogglingOperator:a.ComponentOptions.buildBooleanOption({defaultValue:!1,alias:"allowTogglingOperator"}),enableFacetSearch:a.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"FacetSearch",priority:8}),facetSearchDelay:a.ComponentOptions.buildNumberOption({defaultValue:100,min:0,depend:"enableFacetSearch"}),facetSearchIgnoreAccents:a.ComponentOptions.buildBooleanOption({defaultValue:!1,depend:"enableFacetSearch"}),numberOfValuesInFacetSearch:a.ComponentOptions.buildNumberOption({defaultValue:15,min:1}),includeInBreadcrumb:a.ComponentOptions.buildBooleanOption({defaultValue:!0}),numberOfValuesInBreadcrumb:a.ComponentOptions.buildNumberOption({defaultFunction:function(){return r.DeviceUtils.isMobileDevice()?3:5},min:0,depend:"includeInBreadcrumb"}),includeInOmnibox:a.ComponentOptions.buildBooleanOption({defaultValue:!1,deprecated:"This option is exposed for legacy reasons, and the recommendation is to not use this option."}),numberOfValuesInOmnibox:a.ComponentOptions.buildNumberOption({defaultFunction:function(){return r.DeviceUtils.isMobileDevice()?3:5},min:0,depend:"includeInOmnibox",deprecated:"This option is exposed for legacy reasons, and the recommendation is to not use this option."}),computedField:a.ComponentOptions.buildFieldOption({section:"ComputedField",priority:7}),computedFieldOperation:a.ComponentOptions.buildStringOption({defaultValue:"sum",section:"ComputedField"}),computedFieldFormat:a.ComponentOptions.buildStringOption({defaultValue:"c0",section:"ComputedField"}),computedFieldCaption:a.ComponentOptions.buildLocalizedStringOption({defaultValue:c.l("ComputedField"),section:"ComputedField"}),preservePosition:a.ComponentOptions.buildBooleanOption({defaultValue:!0}),paddingContainer:a.ComponentOptions.buildSelectorOption({defaultFunction:function(e){var t=y.$$(e).parent("coveo-facet-column");return null!=t?t:e.parentElement}}),scrollContainer:a.ComponentOptions.buildSelectorOption({defaultFunction:function(e){return document.body}}),enableMoreLess:a.ComponentOptions.buildBooleanOption({defaultValue:!0}),pageSize:a.ComponentOptions.buildNumberOption({defaultValue:10,min:1,depend:"enableMoreLess"}),enableCollapse:a.ComponentOptions.buildBooleanOption({defaultValue:!0,depend:"enableSettings"}),allowedValues:a.ComponentOptions.buildListOption(),additionalFilter:a.ComponentOptions.buildStringOption(),dependsOn:a.ComponentOptions.buildStringOption(),valueCaption:a.ComponentOptions.buildJsonObjectOption(),enableResponsiveMode:a.ComponentOptions.buildBooleanOption({defaultValue:!0}),responsiveBreakpoint:a.ComponentOptions.buildNumberOption({defaultValue:800,deprecated:"This option is exposed for legacy reasons, and the recommendation is to not use this option."}),dropdownHeaderLabel:a.ComponentOptions.buildLocalizedStringOption()},t.Facet=H,N.Initialization.registerAutoCreateComponent(H),H.doExport()}).call(t,o(6))},607:function(e,t,o){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=o(265),s=o(5),a=function(e){function t(t){var o=e.call(this,t)||this;return o.facet=t,o}return i(t,e),t.prototype.createBasicGroupByRequest=function(t,o){void 0===o&&(o=!0);var i=e.prototype.createBasicGroupByRequest.call(this,null,o);return i.allowedValues=void 0,i=s.Utils.isNonEmptyArray(this.facet.options.ranges)?this.buildGroupByQueryForPredefinedRanges(i):this.buildGroupByQueryForAutomaticRanges(i)},t.prototype.createGroupByAllowedValues=function(){},t.prototype.buildGroupByQueryForAutomaticRanges=function(e){return e.generateAutomaticRanges=!0,e},t.prototype.buildGroupByQueryForPredefinedRanges=function(e){return e.rangeValues=this.facet.options.ranges,e.maximumNumberOfValues=this.facet.options.ranges.length,e},t}(n.FacetQueryController);t.FacetRangeQueryController=a},78:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(3),n=o(15),s=o(8),a=o(20),r=o(5),c=o(1),l=o(11),u=o(13),h=function(){function e(t){var o=this;this.disabledComponents=[],this.responsiveComponents=[],this.coveoRoot=t,this.searchInterface=s.Component.get(this.coveoRoot.el,a.SearchInterface,!1),this.dropdownHeadersWrapper=i.$$("div",{className:e.DROPDOWN_HEADER_WRAPPER_CSS_CLASS}),this.searchBoxElement=this.getSearchBoxElement(),this.logger=new u.Logger(this),this.resizeListener=c.debounce(function(){0!=o.coveoRoot.width()?(o.addDropdownHeaderWrapperIfNeeded(),o.shouldSwitchToSmallMode()?o.coveoRoot.addClass("coveo-small-interface"):o.shouldSwitchToSmallMode()||o.coveoRoot.removeClass("coveo-small-interface"),c.each(o.responsiveComponents,function(e){e.handleResizeEvent()})):o.logger.warn("The width of the search interface is 0, cannot dispatch resize events to responsive components. This means that the tabs will not\n        automatically fit in the tab section. Also, the facet and recommendation component will not hide in a menu. Could the search\n        interface display property be none? Could its visibility property be set to hidden? Also, if either of these scenarios happen during\n        loading, it could be the cause of this issue.")},e.RESIZE_DEBOUNCE_DELAY,!0),window.addEventListener("resize",this.resizeListener),this.bindNukeEvents()}return e.register=function(t,o,i,s,a){var h=this;(a.initializationEventRoot||o).on(n.InitializationEvents.afterInitialization,function(){if(h.shouldEnableResponsiveMode(o)){var n=c.find(h.componentManagers,function(e){return o.el==e.coveoRoot.el});if(n||(n=new e(o),h.componentManagers.push(n)),!r.Utils.isNullOrUndefined(a.enableResponsiveMode)&&!a.enableResponsiveMode)return void n.disableComponent(i);h.componentInitializations.push({responsiveComponentsManager:n,arguments:[t,o,i,s,a]})}if(0==--h.remainingComponentInitializations)if(h.instantiateResponsiveComponents(),0==o.width()){var d=new u.Logger("ResponsiveComponentsManager");d.info("Search interface width is 0, cannot dispatch resize events to responsive components. Will try again after first\n          query success."),o.one(l.QueryEvents.querySuccess,function(){h.resizeAllComponentsManager()})}else h.resizeAllComponentsManager()}),this.remainingComponentInitializations++},e.shouldEnableResponsiveMode=function(e){var t=s.Component.get(e.el,a.SearchInterface,!0);return t instanceof a.SearchInterface&&t.options.enableAutomaticResponsiveMode},e.instantiateResponsiveComponents=function(){c.each(this.componentInitializations,function(e){var t=e.responsiveComponentsManager;t.register.apply(t,e.arguments)})},e.resizeAllComponentsManager=function(){c.each(this.componentManagers,function(e){e.resizeListener()})},e.prototype.register=function(e,t,o,i,n){if(!this.isDisabled(o)){if(!this.isActivated(o)){var s=new e(t,o,n);this.isTabs(o)?this.responsiveComponents.push(s):this.responsiveComponents.unshift(s)}c.each(this.responsiveComponents,function(e){null!=e.registerComponent&&e.registerComponent(i)})}},e.prototype.disableComponent=function(e){this.disabledComponents.push(e)},e.prototype.isDisabled=function(e){return-1!=c.indexOf(this.disabledComponents,e)},e.prototype.shouldSwitchToSmallMode=function(){var e=this.needDropdownWrapper(),t=this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getMediumScreenWidth();return e||t},e.prototype.needDropdownWrapper=function(){for(var e=0;e<this.responsiveComponents.length;e++){var t=this.responsiveComponents[e];if(t.needDropdownWrapper&&t.needDropdownWrapper())return!0}return!1},e.prototype.addDropdownHeaderWrapperIfNeeded=function(){if(this.needDropdownWrapper()){var e=i.$$(this.coveoRoot).find(".coveo-tab-section");this.searchBoxElement?this.dropdownHeadersWrapper.insertAfter(this.searchBoxElement):e?this.dropdownHeadersWrapper.insertAfter(e):this.coveoRoot.prepend(this.dropdownHeadersWrapper.el)}},e.prototype.isTabs=function(e){return"Tab"==e},e.prototype.isActivated=function(e){return void 0!=c.find(this.responsiveComponents,function(t){return t.ID==e})},e.prototype.getSearchBoxElement=function(){var e=this.coveoRoot.find(".coveo-search-section");return e||this.coveoRoot.find(".CoveoSearchbox")},e.prototype.bindNukeEvents=function(){var e=this;i.$$(this.coveoRoot).on(n.InitializationEvents.nuke,function(){window.removeEventListener("resize",e.resizeListener)})},e}();h.DROPDOWN_HEADER_WRAPPER_CSS_CLASS="coveo-dropdown-header-wrapper",h.RESIZE_DEBOUNCE_DELAY=200,h.componentManagers=[],h.remainingComponentInitializations=0,h.componentInitializations=[],t.ResponsiveComponentsManager=h},89:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.shouldDrawFacetSlider=function(e){return!this.isSmallFacetActivated(e)&&!this.isSmallRecommendationActivated(e)},e.isSmallTabsActivated=function(e){return e.hasClass(this.smallTabsClassName)},e.isSmallFacetActivated=function(e){return e.hasClass(this.smallFacetClassName)},e.isSmallRecommendationActivated=function(e){return e.hasClass(this.smallRecommendationClassName)},e.activateSmallTabs=function(e){e.addClass(this.smallTabsClassName)},e.deactivateSmallTabs=function(e){e.removeClass(this.smallTabsClassName)},e.activateSmallFacet=function(e){e.addClass(this.smallFacetClassName)},e.deactivateSmallFacet=function(e){e.removeClass(this.smallFacetClassName)},e.activateSmallRecommendation=function(e){e.addClass(this.smallRecommendationClassName)},e.deactivateSmallRecommendation=function(e){e.removeClass(this.smallRecommendationClassName)},e}();i.smallTabsClassName="coveo-small-tabs",i.smallFacetClassName="coveo-small-facets",i.smallRecommendationClassName="coveo-small-recommendation",t.ResponsiveComponentsUtils=i},90:function(e,t,o){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=o(11),s=o(3),a=o(395),r=function(e){function t(t,o,i){var a=e.call(this,t,o)||this;return a.facet=t,a.facetValue=o,a.keepDisplayedValueNextTime=i,a.firstQuery=!0,s.$$(t.root).one(n.QueryEvents.querySuccess,function(){a.firstQuery=!1}),a}return i(t,e),t.prototype.bindEvent=function(){e.prototype.bindEvent.call(this,{displayNextTime:this.keepDisplayedValueNextTime,pinFacet:this.facet.options.preservePosition})},t}(a.ValueElement);t.FacetValueElement=r},91:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(7),n=o(5),s=o(24),a=o(1),r=function(){function e(){this.selected=!1,this.excluded=!1,this.waitingForDelta=!1}return e.prototype.reset=function(){this.selected=!1,this.excluded=!1},e.prototype.updateCountsFromNewValue=function(e){i.Assert.exists(e),this.occurrences=e.occurrences,this.delta=e.delta,this.computedField=e.computedField},e.prototype.cloneWithZeroOccurrences=function(){return this.occurrences=0,this.computedField=void 0,this.delta=void 0,this},e.prototype.cloneWithDelta=function(e,t){i.Assert.isLargerOrEqualsThan(0,e);var o=this.cloneWithZeroOccurrences();return o.delta=t,o.occurrences=e,o},e.prototype.getFormattedCount=function(){var e=void 0;return n.Utils.exists(this.delta)&&this.delta>0?e="+"+s.format(this.delta,"n0"):this.occurrences>0&&(e=s.format(this.occurrences,"n0")),e},e.prototype.getFormattedComputedField=function(e){return 0!=this.computedField?s.format(this.computedField,e):void 0},e.create=function(t){if(a.isString(t))return e.createFromValue(t);if(a.isObject(t))return"computedFieldResults"in t?e.createFromGroupByValue(t):e.createFromFieldValue(t);throw new Error("Can't create value from "+t)},e.createFromValue=function(t){i.Assert.isNonEmptyString(t);var o=new e;return o.value=t,o.lookupValue=t,o},e.createFromGroupByValue=function(t){i.Assert.exists(t),i.Assert.exists(t);var o=new e;return o.value=t.value,o.lookupValue=n.Utils.exists(t.lookupValue)?t.lookupValue:t.value,o.occurrences=t.numberOfResults,o.computedField=n.Utils.isNonEmptyArray(t.computedFieldResults)?t.computedFieldResults[0]:void 0,o.score=t.score,o},e.createFromFieldValue=function(t){i.Assert.exists(t);var o=new e;return o.value=t.value,o.lookupValue=t.lookupValue,o.occurrences=t.numberOfResults,o},e}();t.FacetValue=r;var c=function(){function e(e){n.Utils.exists(e)?this.values=a.map(e.values,function(e){return r.createFromGroupByValue(e)}):this.values=[]}return e.prototype.add=function(e){i.Assert.exists(e),i.Assert.check(!this.contains(e.value)),this.values.push(e)},e.prototype.remove=function(e){i.Assert.isNonEmptyString(e),e=e,this.values=a.filter(this.values,function(t){return t.value!=e})},e.prototype.size=function(){return this.values.length},e.prototype.isEmpty=function(){return 0==this.values.length},e.prototype.at=function(e){return i.Assert.isLargerOrEqualsThan(0,e),i.Assert.isSmallerThan(this.values.length,e),this.values[e]},e.prototype.get=function(e){return a.find(this.values,function(t){return t.value.toLowerCase()==e.toLowerCase()})},e.prototype.contains=function(e){return n.Utils.exists(this.get(e))},e.prototype.getAll=function(){return this.values},e.prototype.getSelected=function(){return a.filter(this.values,function(e){return e.selected})},e.prototype.getExcluded=function(){return a.filter(this.values,function(e){return e.excluded})},e.prototype.hasSelectedOrExcludedValues=function(){return 0!=this.getSelected().length||0!=this.getExcluded().length},e.prototype.reset=function(){a.each(this.values,function(e){return e.reset()})},e.prototype.importActiveValuesFromOtherList=function(e){var t=this;i.Assert.exists(e),a.each(e.getSelected(),function(e){var o=t.get(e.value);n.Utils.exists(o)?o.selected=!0:t.values.push(e.cloneWithZeroOccurrences())}),a.each(e.getExcluded(),function(e){var o=t.get(e.value);if(n.Utils.exists(o))o.excluded=!0;else if(0!=e.occurrences){var i=e.occurrences,s=e.cloneWithZeroOccurrences();s.occurrences=i,t.values.push(s)}else t.values.push(e.cloneWithZeroOccurrences())})},e.prototype.updateCountsFromNewValues=function(e){i.Assert.exists(e),this.values=a.map(this.values,function(t){var o=e.get(t.value);return n.Utils.exists(o)?(t.updateCountsFromNewValue(o),t):null==t.occurrences?t.cloneWithZeroOccurrences():t})},e.prototype.updateDeltaWithFilteredFacetValues=function(e){i.Assert.exists(e),a.each(this.values,function(t){var o=e.get(t.value);t.waitingForDelta=!1,n.Utils.exists(o)?t.occurrences-o.occurrences>0?t.delta=t.occurrences-o.occurrences:t.delta=null:t.selected||t.excluded||(t.delta=t.occurrences)})},e.prototype.mergeWithUnfilteredFacetValues=function(e){var t=this;i.Assert.exists(e);var o=[];a.each(e.values,function(e){var i=t.get(e.value);n.Utils.exists(i)?i.occurrences==e.occurrences?o.push(i):o.push(e.cloneWithDelta(e.occurrences,e.occurrences-i.occurrences)):o.push(e.cloneWithDelta(e.occurrences,e.occurrences))});var s=0;a.each(this.values,function(t){var i=e.get(t.value);if(n.Utils.exists(i)){for(var a=0;a<o.length;a++)if(o[a].value==t.value){s=a+1;break}}else(t.selected||t.excluded)&&(o.splice(s,0,t),s++)}),this.values=o},e.prototype.sortValuesDependingOnStatus=function(e){if(this.values=a.sortBy(this.values,function(e){return e.selected?1:e.excluded?3:2}),null!=e&&e<this.values.length){var t=this.getExcluded().length,o=this.values.splice(this.values.length-t,t);Array.prototype.splice.apply(this.values,[e-t,0].concat(o))}},e}();t.FacetValues=c}});