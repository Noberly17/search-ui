webpackJsonpCoveo__temporary([32],{317:function(e,t,o){"use strict";(function(e){var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function s(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(s.prototype=o.prototype,new s)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=o(8),i=o(9),l=o(643),r=o(5),a=o(17),u=o(2),p=o(7),h=o(3),c=o(10),d=o(1),m=o(4);o(595);var f=function(t){function o(e,s,n,l){var r=t.call(this,e,o.ID,n)||this;return r.element=e,r.options=s,r.result=l,r.showingMoreResults=!1,r.options=i.ComponentOptions.initComponentOptions(r.element,o,s),p.Assert.exists(l),r.buildElements(),r.displayThoseResults(r.result.childResults).then(function(){r.updateElementVisibility(),h.$$(r.element.parentElement).hasClass("CoveoCardOverlay")&&r.bindOverlayEvents(),0!=r.result.childResults.length||r.result.moreResults||h.$$(r.element).hide()}),r}return s(o,t),o.prototype.showMoreResults=function(){var e=this;p.Assert.exists(this.result.moreResults),this.cancelAnyPendingShowMore(),this.moreResultsPromise=this.result.moreResults(),this.waitAnimation=h.$$("div",{className:"coveo-loading-spinner"}).el,this.results.appendChild(this.waitAnimation),this.updateElementVisibility();var t=this.moreResultsPromise.then(function(t){return e.childResults=t,e.showingMoreResults=!0,e.displayThoseResults(t).then(function(){return e.updateElementVisibility(t.length),t})});return t.finally(function(){e.moreResultsPromise=void 0,h.$$(e.waitAnimation).detach(),e.waitAnimation=void 0}),t},o.prototype.showLessResults=function(){this.cancelAnyPendingShowMore(),this.showingMoreResults=!1,this.displayThoseResults(this.result.childResults),this.updateElementVisibility(),this.scrollToResultElement()},o.prototype.buildElements=function(){this.buildHeader(),this.buildResults(),this.buildFooter()},o.prototype.buildHeader=function(){var e=h.$$("div",{className:"coveo-folding-header"}).el;this.element.appendChild(e),void 0!=this.options.normalCaption&&void 0!=this.options.expandedCaption&&(this.normalCaption=h.$$("div",{className:"coveo-folding-normal-caption"},this.options.normalCaption).el,e.appendChild(this.normalCaption),this.expandedCaption=h.$$("div",{className:"coveo-folding-expanded-caption"},this.options.expandedCaption).el,e.appendChild(this.expandedCaption)),this.oneResultCaption=h.$$("div",{className:"coveo-folding-oneresult-caption"},this.options.oneResultCaption).el,e.appendChild(this.oneResultCaption)},o.prototype.buildResults=function(){this.results=h.$$("div",{className:"coveo-folding-results"}).el,this.element.appendChild(this.results)},o.prototype.buildFooter=function(){var e=this,t=h.$$("div",{className:"coveo-folding-footer"}).el;if(this.element.parentElement.appendChild(t),this.result.moreResults){this.showMore=h.$$("div",{className:"coveo-folding-footer-section-for-less"}).el,h.$$(this.showMore).on("click",function(){return e.showMoreResults()}),t.appendChild(this.showMore),this.showLess=h.$$("div",{className:"coveo-folding-footer-section-for-more"}).el,h.$$(this.showLess).on("click",function(){return e.showLessResults()}),t.appendChild(this.showLess);var o=h.$$("div",{className:"coveo-more"},h.$$("span",{className:"coveo-folding-footer-icon"}).el).el,s=h.$$("div",{className:"coveo-less"},h.$$("span",{className:"coveo-folding-footer-icon"}).el).el,n=h.$$("a",{className:"coveo-folding-show-more"},this.options.moreCaption).el,i=h.$$("a",{className:"coveo-folding-show-less"},this.options.lessCaption).el;this.showMore.appendChild(n),this.showLess.appendChild(i),this.showMore.appendChild(o),this.showLess.appendChild(s)}},o.prototype.updateElementVisibility=function(e){this.normalCaption&&h.$$(this.normalCaption).toggle(!this.showingMoreResults&&this.result.childResults.length>0),this.expandedCaption&&h.$$(this.expandedCaption).toggle(this.showingMoreResults),h.$$(this.oneResultCaption).toggleClass("coveo-hidden",!(e&&1==e)),this.showMore&&(h.$$(this.showMore).toggle(!this.showingMoreResults&&!r.Utils.exists(this.moreResultsPromise)),h.$$(this.showLess).toggle(this.showingMoreResults));var t=h.$$(this.element).find(".coveo-show-if-normal");t&&h.$$(t).toggle(!this.showingMoreResults);var o=h.$$(this.element).find(".coveo-show-if-expanded");o&&h.$$(o).toggle(this.showingMoreResults)},o.prototype.scrollToResultElement=function(){var e=h.$$(this.element).closest("CoveoResult");window.scrollTo(0,window.scrollY+e.getBoundingClientRect().top)},o.prototype.displayThoseResults=function(t){var o=this,s=d.map(t,function(e){return o.renderChildResult(e)});return e.all(s).then(function(e){return h.$$(o.results).empty(),d.each(e,function(e){o.results.appendChild(e)}),!0})},o.prototype.renderChildResult=function(e){var t=this;return a.QueryUtils.setStateObjectOnQueryResult(this.queryStateModel.get(),e),a.QueryUtils.setSearchInterfaceObjectOnQueryResult(this.searchInterface,e),this.options.resultTemplate.instantiateToElement(e,{wrapInDiv:!1,checkCondition:!1,responsiveComponents:this.searchInterface.responsiveComponents}).then(function(o){return h.$$(o).addClass("coveo-result-folding-child-result"),h.$$(o).toggleClass("coveo-normal-child-result",!t.showingMoreResults),h.$$(o).toggleClass("coveo-expanded-child-result",t.showingMoreResults),t.autoCreateComponentsInsideResult(o,e).initResult.then(function(){return o})})},o.prototype.autoCreateComponentsInsideResult=function(e,t){p.Assert.exists(e);var o=this.searchInterface.options,s={options:o,bindings:this.getBindings(),result:t};return u.Initialization.automaticallyCreateComponentsInside(e,s)},o.prototype.cancelAnyPendingShowMore=function(){this.moreResultsPromise&&(this.moreResultsPromise=void 0),p.Assert.doesNotExists(this.moreResultsPromise),p.Assert.doesNotExists(this.waitAnimation)},o.prototype.bindOverlayEvents=function(){var e=this;this.bind.one(this.element.parentElement,"openCardOverlay",function(){e.result.moreResults&&e.showMoreResults()})},o}(n.Component);f.ID="ResultFolding",f.doExport=function(){m.exportGlobally({ResultFolding:f,DefaultFoldingTemplate:l.DefaultFoldingTemplate})},f.options={resultTemplate:i.ComponentOptions.buildTemplateOption({defaultFunction:function(){return new l.DefaultFoldingTemplate}}),normalCaption:i.ComponentOptions.buildLocalizedStringOption(),expandedCaption:i.ComponentOptions.buildLocalizedStringOption(),moreCaption:i.ComponentOptions.buildLocalizedStringOption({postProcessing:function(e){return e||c.l("ShowMore")}}),lessCaption:i.ComponentOptions.buildLocalizedStringOption({postProcessing:function(e){return e||c.l("ShowLess")}}),oneResultCaption:i.ComponentOptions.buildLocalizedStringOption({postProcessing:function(e){return e||c.l("DisplayingTheOnlyMessage")}})},t.ResultFolding=f,u.Initialization.registerAutoCreateComponent(f)}).call(t,o(6))},595:function(e,t){},643:function(e,t,o){"use strict";var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function s(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(s.prototype=o.prototype,new s)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=o(24),i=function(e){function t(){return e.call(this)||this}return s(t,e),t.prototype.instantiateToString=function(e){return'<div class="coveo-child-result"><span class="CoveoIcon"></span> <a class="CoveoResultLink"></a> <span class="CoveoQuickview"></span></div>'},t.prototype.getType=function(){return"DefaultFoldingTemplate"},t}(n.Template);t.DefaultFoldingTemplate=i}});