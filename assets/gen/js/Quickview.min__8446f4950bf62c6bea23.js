webpackJsonpCoveo__temporary([12],{14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=function(){function e(){}return e.addClassToSVGInContainer=function(t,n){var o=t.querySelector("svg");o.setAttribute("class",""+e.getClass(o)+n)},e.removeClassFromSVGInContainer=function(t,n){var o=t.querySelector("svg");o.setAttribute("class",e.getClass(o).replace(n,""))},e.addStyleToSVGInContainer=function(e,t){var n=e.querySelector("svg");o.each(t,function(e,t){n.style[t]=e})},e.getClass=function(e){var t=e.getAttribute("class");return t?t+" ":""},e}();t.SVGDom=i},144:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),r=n(88),a=n(5),l=n(0),s=function(e){function t(t){var n=e.call(this)||this;return n.templates=t,a.Assert.exists(t),n}return o(t,e),t.prototype.instantiateToString=function(e,t){void 0===t&&(t={});for(var n=(new i.DefaultInstantiateTemplateOptions).merge(t),o=l.reject(this.templates,function(e){return null!=e.role}),r=0;r<o.length;r++){var a=o[r].instantiateToString(e,n);if(null!=a)return a}return this.getFallbackTemplate().instantiateToString(e,t)},t.prototype.instantiateToElement=function(e,t){void 0===t&&(t={});for(var n=(new i.DefaultInstantiateTemplateOptions).merge(t),o=l.reject(this.templates,function(e){return null!=e.role}),r=0;r<o.length;r++){var a=o[r].instantiateToElement(e,n);if(null!=a)return a}return this.getFallbackTemplate().instantiateToElement(e,n)},t.prototype.getFields=function(){return l.reduce(this.templates,function(e,t){return e.concat(t.getFields())},[])},t.prototype.getType=function(){return"TemplateList"},t.prototype.getFallbackTemplate=function(){return new r.DefaultResultTemplate},t}(i.Template);t.TemplateList=s},151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.quickviewLoaded="quickviewLoaded",e.openQuickview="openQuickview",e}();t.QuickviewEvents=o},189:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=n(7),a=n(60),l=n(2),s=n(402),u=n(31),c=n(18),d=n(403),p=n(12),m=n(151),h=n(1),v=n(21),g=n(23),f=n(3);n(404);var y=n(13),w=n(14),b=n(9),C=n(4),T=n(74),k=function(e){function t(n,o,i,a,c){void 0===c&&(c=g.ModalBox);var d=e.call(this,n,t.ID,i)||this;if(d.element=n,d.options=o,d.bindings=i,d.result=a,d.ModalBox=c,d.options=r.ComponentOptions.initComponentOptions(n,t,o),null==d.options.contentTemplate&&(d.options.contentTemplate=new s.DefaultQuickviewTemplate),/^\s*$/.test(d.element.innerHTML)){var p=l.$$("div",{className:"coveo-icon-for-quickview"},y.SVGIcons.icons.quickview);w.SVGDom.addClassToSVGInContainer(p.el,"coveo-icon-for-quickview-svg");var m=l.$$("div",{className:"coveo-caption-for-icon",tabindex:0},"Quickview".toLocaleString()).el,h=l.$$("div");h.append(p.el),h.append(m),l.$$(d.element).append(h.el)}return d.bindClick(a),d.bindings.resultElement&&d.bind.on(d.bindings.resultElement,u.ResultListEvents.openQuickview,function(){return d.open()}),d}return o(t,e),t.prototype.open=function(){var e=this;if(null==this.modalbox){t.resultCurrentlyBeingRendered=this.result,l.$$(document.activeElement).trigger("blur");var n=this.prepareOpenQuickviewObject();this.createModalBox(n).then(function(){e.bindQuickviewEvents(n),e.animateAndOpen(),e.logUsageAnalyticsEvent(),e.queryStateModel.set(p.QueryStateModel.attributesEnum.quickview,e.getHashId()),t.resultCurrentlyBeingRendered=null})}},t.prototype.close=function(){null!=this.modalbox&&(this.modalbox.close(),this.modalbox=null)},t.prototype.getHashId=function(){return this.result.queryUid+"."+this.result.index+"."+c.StringUtils.hashCode(this.result.uniqueId)},t.prototype.logUsageAnalyticsEvent=function(){this.usageAnalytics.logClickEvent(b.analyticsActionCauseList.documentQuickview,{author:C.Utils.getFieldValue(this.result,"author"),documentURL:this.result.clickUri,documentTitle:this.result.title},this.result,this.element)},t.prototype.bindClick=function(e){var t=this;if(void 0===e.hasHtmlVersion||e.hasHtmlVersion||this.options.alwaysShow){var n=function(){return t.open()};l.$$(this.element).on("click",n),this.bind.on(this.element,"keyup",v.KeyboardUtils.keypressAction(v.KEYBOARD.ENTER,n))}else this.element.style.display="none"},t.prototype.bindQuickviewEvents=function(e){l.$$(this.modalbox.content).on(m.QuickviewEvents.quickviewLoaded,function(){e.loadingAnimation instanceof HTMLElement?l.$$(e.loadingAnimation).remove():e.loadingAnimation instanceof Promise&&e.loadingAnimation.then(function(e){l.$$(e).remove()})})},t.prototype.animateAndOpen=function(){var e=l.$$(this.modalbox.modalBox).find("."+i.Component.computeCssClassName(d.QuickviewDocument));e&&h.Initialization.dispatchNamedMethodCallOrComponentCreation("open",e,null)},t.prototype.createModalBox=function(e){var t=this,n=l.$$("div");return n.addClass("coveo-computed-modal-box-content"),e.content.then(function(e){n.append(e.el);var o=a.DomUtils.getQuickviewHeader(t.result,{showDate:t.options.showDate,title:t.options.title},t.bindings).el;return t.modalbox=t.ModalBox.open(n.el,{title:o,className:"coveo-quick-view",validation:function(){return t.closeQuickview(),!0},body:t.element.ownerDocument.body,sizeMod:"big"}),n})},t.prototype.prepareOpenQuickviewObject=function(){var e=this.options.loadingAnimation;return{loadingAnimation:e,content:this.prepareQuickviewContent(e)}},t.prototype.prepareQuickviewContent=function(e){var t=this;return this.options.contentTemplate.instantiateToElement(this.result).then(function(n){var o=l.$$(n),r=t.searchInterface.options,a={options:r,bindings:t.getBindings(),result:t.result};return h.Initialization.automaticallyCreateComponentsInside(o.el,a).initResult.then(function(){return void 0!=o.find("."+i.Component.computeCssClassName(d.QuickviewDocument))&&t.options.enableLoadingAnimation&&(e instanceof HTMLElement?o.prepend(e):e instanceof Promise&&e.then(function(e){o.prepend(e)})),o})})},t.prototype.closeQuickview=function(){this.queryStateModel.set(p.QueryStateModel.attributesEnum.quickview,"")},t.ID="Quickview",t.doExport=function(){f.exportGlobally({Quickview:t,QuickviewDocument:d.QuickviewDocument})},t.options={alwaysShow:r.ComponentOptions.buildBooleanOption({defaultValue:!1}),title:r.ComponentOptions.buildStringOption(),showDate:r.ComponentOptions.buildBooleanOption({defaultValue:!0}),enableLoadingAnimation:r.ComponentOptions.buildBooleanOption({defaultValue:!0}),contentTemplate:T.TemplateComponentOptions.buildTemplateOption({selectorAttr:"data-template-selector",idAttr:"data-template-id"}),loadingAnimation:r.ComponentOptions.buildOption(r.ComponentOptionsType.NONE,function(e){var t=e.getAttribute("data-loading-animation-selector");if(null!=t){var n=l.$$(document.documentElement).find(t);if(null!=n)return l.$$(n).detach(),n}var o=e.getAttribute("data-loading-animation-template-id");if(null!=o){var i=T.TemplateComponentOptions.loadResultTemplateFromId(o);if(i)return i.instantiateToElement(void 0,{checkCondition:!1})}return a.DomUtils.getBasicLoadingAnimation()})},t.resultCurrentlyBeingRendered=null,t}(i.Component);t.Quickview=k,h.Initialization.registerAutoCreateComponent(k)},402:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),r=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.instantiateToString=function(e){return'<div class="coveo-quick-view-full-height"><div class="CoveoQuickviewDocument"></div></div>'},t}(i.Template);t.DefaultQuickviewTemplate=r},403:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=n(7),a=n(5),l=n(2),s=n(151),u=n(20),c=n(4),d=n(100),p=n(1),m=n(8),h=n(0),v=function(e){function t(n,o,i,l){var s=e.call(this,n,t.ID,i)||this;return s.element=n,s.options=o,s.result=l,s.options=r.ComponentOptions.initComponentOptions(n,t,o),s.result=l||s.resolveResult(),s.termsToHighlightWereModified=!1,a.Assert.exists(s.result),s}return o(t,e),t.prototype.createDom=function(){var e=l.$$("div");e.addClass("coveo-quickview-document"),this.element.appendChild(e.el),this.header=this.buildHeader(),this.iframe=this.buildIFrame(),e.append(this.header.el),e.append(this.iframe.el)},t.prototype.open=function(){var e=this;this.ensureDom();var t=(new Date).getTime(),n=this.iframe.find("iframe");n.src="about:blank";var o=this.queryController.getEndpoint(),i=h.keys(this.result.termsToHighlight),r={termsToHighlight:i};l.$$(this.element).trigger(s.QuickviewEvents.openQuickview,r),this.checkIfTermsToHighlightWereModified(r.termsToHighlight);var a=h.extend({},this.getBindings().queryController.getLastQuery());this.termsToHighlightWereModified&&this.handleTermsToHighlight(r.termsToHighlight,a);var u={queryObject:a,requestedOutputSize:this.options.maximumDocumentSize};o.getDocumentHtml(this.result.uniqueId,u).then(function(o){null!=n.contentDocument&&(e.renderHTMLDocument(n,o),e.triggerQuickviewLoaded(t))}).catch(function(i){null!=n.contentDocument&&(0!=i.status?(e.renderErrorReport(n,i.status),e.triggerQuickviewLoaded(t)):(n.onload=function(){e.triggerQuickviewLoaded(t)},n.src=o.getViewAsHtmlUri(e.result.uniqueId,u)))})},t.prototype.renderHTMLDocument=function(e,t){var n=this;e.onload=function(){if(n.computeHighlights(e.contentWindow),n.isNewQuickviewDocument(e.contentWindow)){var t=l.$$(n.element).find("iframe");if(t){t.style.padding="0";var o=l.$$(n.element).find(".coveo-quickview-header");o.style.paddingTop="10",o.style.paddingLeft="10"}}""==l.$$(n.element).find(".coveo-quickview-header").innerHTML&&(l.$$(n.element).find(".coveo-quickview-header").style.display="none")},this.writeToIFrame(e,t),this.wrapPreElementsInIframe(e)},t.prototype.renderErrorReport=function(e,t){var n="";n=400==t?"NoQuickview":"OopsError";var o="<html><body style='font-family: Arimo, 'Helvetica Neue', Helvetica, Arial, sans-serif; -webkit-text-size-adjust: none;' >"+m.l(n)+" </body></html>";this.writeToIFrame(e,o)},t.prototype.writeToIFrame=function(e,t){var n=t;t instanceof HTMLDocument&&(h.each(l.$$(t.body).findAll("a"),function(e){e.setAttribute("target","_top")}),n=t.getElementsByTagName("html")[0].outerHTML),e.contentWindow.document.open();try{e.contentWindow.document.write(n)}catch(e){}e.contentWindow.document.close()},t.prototype.wrapPreElementsInIframe=function(e){try{var t=document.createElement("style");t.type="text/css";var n="html pre { white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; }";n+="body, html { font-family: Arimo, 'Helvetica Neue', Helvetica, Arial, sans-serif; -webkit-text-size-adjust: none; }",u.DeviceUtils.isIos()&&(n+="body, html { height: 1px !important; min-height: 100%; width: 1px !important; min-width: 100%; overflow: scroll; }",l.$$(e).setAttribute("scrolling","no"),n+="body, html {margin: auto}",e.parentElement.style.margin="0 0 5px 5px"),"styleSheet"in t?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n));e.contentWindow.document.head.appendChild(t)}catch(e){}},t.prototype.triggerQuickviewLoaded=function(e){var t=(new Date).getTime(),n={duration:t-e};l.$$(this.element).trigger(s.QuickviewEvents.quickviewLoaded,n)},t.prototype.computeHighlights=function(e){var t=this;l.$$(this.header).empty(),this.keywordsState=[];var n={},o=0;h.each(l.$$(e.document.body).findAll('[id^="CoveoHighlight"]'),function(e,i){var r=t.getHighlightIdParts(e);if(r){var a=r[1],l=parseInt(r[2],10),s=parseInt(r[3],10),u=n[a];if(null==u&&1==s?n[a]=u={text:t.getHighlightInnerText(e),count:1,index:parseInt(a,10),termsCount:"coveotaggedword"==e.nodeName.toLowerCase()?0:1,element:e,occurence:l}:u&&(u.occurence==l&&("coveotaggedword"==e.nodeName.toLowerCase()?u.text+=t.getHighlightInnerText(e):u.termsCount<s&&(u.text+=t.getHighlightInnerText(e),u.termsCount+=1)),u.count=Math.max(u.count,l),o+=1),u&&u.occurence==l&&"span"==e.nodeName.toLowerCase()){var c=t.getHightlightEmbeddedWordIdParts(e),d=c?n[c[1]]:null;d&&d.occurence==parseInt(c[2],10)&&(d.text+=e.childNodes[0].nodeValue||"")}}}),0==o&&(this.header.el.style.minHeight="0");var i=[];return h.each(n,function(n){n.text=t.resolveOriginalTermFromHighlight(n.text);var o={word:n,color:n.element.style.backgroundColor,currentIndex:0,index:n.index};t.keywordsState.push(o),l.$$(t.header).append(t.buildWordButton(o,e)),i.push(n.text)}),i},t.prototype.getHighlightIdParts=function(e){var t=e.id.substr("CoveoHighlight".length+1).match(/^([0-9]+)\.([0-9]+)\.([0-9]+)$/);return t&&t.length>3?t:null},t.prototype.getHighlightInnerText=function(e){return"coveotaggedword"==e.nodeName.toLowerCase()?e.childNodes.length>=1?e.childNodes.item(0).textContent||"":"":e.textContent||""},t.prototype.getHightlightEmbeddedWordIdParts=function(e){var t=e.getElementsByTagName("coveotaggedword")[0];return t?this.getHighlightIdParts(t):null},t.prototype.resolveOriginalTermFromHighlight=function(e){var t=this,n=e;return this.result.termsToHighlight&&(n=h.find(h.keys(this.result.termsToHighlight),function(n){return n.toLowerCase()==e.toLowerCase()||void 0!=h.find(t.result.termsToHighlight[n],function(t){return t.toLowerCase()==e.toLowerCase()})})||n),n},t.prototype.buildWordButton=function(e,t){var n=this,o=l.$$("span");o.addClass("coveo-term-for-quickview");var i=l.$$("span");i.addClass("coveo-term-for-quickview-name"),i.setHtml(e.word.text),i.on("click",function(){n.navigate(e,!1,t)}),o.append(i.el);var r=l.$$("span");r.addClass("coveo-term-for-quickview-up-arrow");var a=l.$$("span");a.addClass("coveo-term-for-quickview-up-arrow-icon"),r.append(a.el),r.on("click",function(){n.navigate(e,!0,t)}),o.append(r.el);var s=l.$$("span");s.addClass("coveo-term-for-quickview-down-arrow");var u=l.$$("span");return u.addClass("coveo-term-for-quickview-down-arrow-icon"),s.append(u.el),s.on("click",function(){n.navigate(e,!1,t)}),o.append(s.el),o.el.style.backgroundColor=e.color,o.el.style.borderColor=this.getSaturatedColor(e.color),s.el.style.borderColor=this.getSaturatedColor(e.color),o.el},t.prototype.navigate=function(e,t,n){var o,i=e.currentIndex;o=t?i<=1?e.word.count:i-1:i==e.word.count?1:i+1;var r=this.getScrollingElement(n),a=l.$$(r).find('[id^="CoveoHighlight:'+e.word.index+"."+i+'"]');a&&(a.style.border="");var s=l.$$(n.document.body).find('[id^="CoveoHighlight:'+e.word.index+"."+o+'"]');if(s.style.border="1px dotted #333",e.currentIndex=o,this.isNewQuickviewDocument(n)){var u=l.$$(s).closest(".pc");l.$$(u).addClass("opened")}s.scrollIntoView(),document.body.scrollLeft=0,document.body.scrollTop=0},t.prototype.buildHeader=function(){var e=l.$$("div");return e.addClass("coveo-quickview-header"),e},t.prototype.buildIFrame=function(){var e=l.$$("iframe");e.setAttribute("sandbox","allow-same-origin allow-top-navigation");var t=l.$$("div");return t.addClass("coveo-iframeWrapper"),t.el.appendChild(e.el),t},t.prototype.getScrollingElement=function(e){var t;return this.isNewQuickviewDocument(e)&&(t=l.$$(e.document.body).find("#page-container")),t||(t=l.$$(e.document.body).el),t},t.prototype.isNewQuickviewDocument=function(e){var t=l.$$(e.document.head).find("meta[name='generator']");return t&&"pdf2htmlEX"==t.getAttribute("content")},t.prototype.handleTermsToHighlight=function(e,t){var n=this;for(var o in this.result.termsToHighlight)delete this.result.termsToHighlight[o];var i="";h.each(e,function(e){i+=e+" ",n.result.termsToHighlight[e]=new Array(e)}),i=i.substring(0,i.length-1),t.q=i},t.prototype.checkIfTermsToHighlightWereModified=function(e){c.Utils.arrayEqual(e,h.keys(this.result.termsToHighlight))||(this.termsToHighlightWereModified=!0)},t.prototype.getSaturatedColor=function(e){var t=parseInt(e.substring(4,7)),n=parseInt(e.substring(9,12)),o=parseInt(e.substring(14,17)),i=d.ColorUtils.rgbToHsv(t,n,o);i[1]*=2,i[1]>1&&(i[1]=1);var r=d.ColorUtils.hsvToRgb(i[0],i[1],i[2]);return"rgb("+r[0].toString()+", "+r[1].toString()+", "+r[2].toString()+")"},t.ID="QuickviewDocument",t.options={maximumDocumentSize:r.ComponentOptions.buildNumberOption({defaultValue:0,min:0})},t}(i.Component);t.QuickviewDocument=v,p.Initialization.registerAutoCreateComponent(v)},404:function(e,t){},74:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(58),i=n(144),r=n(48),a=n(77),l=n(7),s=n(5),u=n(4),c=n(0),d=function(){function e(){}return e.buildTemplateOption=function(t){return l.ComponentOptions.buildOption(l.ComponentOptionsType.TEMPLATE,e.loadTemplateOption,t)},e.loadTemplateOption=function(t,n,o,i){void 0===i&&(i=document);var r,a=o.selectorAttr||l.ComponentOptions.attrNameFromName(n,o)+"-selector",s=t.getAttribute(a)||l.ComponentOptions.getAttributeFromAlias(t,o);if(null!=s){var u=i.querySelector(s);null!=u&&(r=e.createResultTemplateFromElement(u))}if(null==r){var c=o.idAttr||l.ComponentOptions.attrNameFromName(n,o)+"-id",d=t.getAttribute(c)||l.ComponentOptions.getAttributeFromAlias(t,o);null!=d&&(r=e.loadResultTemplateFromId(d))}if(null==r){var p=o.childSelector;null==p&&(p="."+n.replace(/([A-Z])/g,"-$1").toLowerCase()),r=e.loadChildrenResultTemplateFromSelector(t,p)}return r},e.createResultTemplateFromElement=function(e){s.Assert.exists(e);var t=e.getAttribute("type"),n="You must specify the type of template. Valid values are: "+r.UnderscoreTemplate.mimeTypes.toString()+" "+a.HtmlTemplate.mimeTypes.toString();return s.Assert.check(u.Utils.isNonEmptyString(t),n),-1!=c.indexOf(r.UnderscoreTemplate.mimeTypes,t.toLowerCase())?r.UnderscoreTemplate.create(e):-1!=c.indexOf(a.HtmlTemplate.mimeTypes,t.toLowerCase())?new a.HtmlTemplate(e):void s.Assert.fail("Cannot guess template type from attribute: "+t+". Valid values are "+n)},e.loadResultTemplateFromId=function(e){return u.Utils.isNonEmptyString(e)?o.TemplateCache.getTemplate(e):null},e.loadChildrenResultTemplateFromSelector=function(t,n){var o=l.ComponentOptions.loadChildrenHtmlElementFromSelector(t,n);return o.length>0?new i.TemplateList(c.compact(o.map(function(t){return e.createResultTemplateFromElement(t)}))):null},e}();t.TemplateComponentOptions=d}});